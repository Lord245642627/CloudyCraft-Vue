{"ast":null,"code":"import * as _ from 'lodash-es';\nimport { PriorityQueue } from '../data/priority-queue.js';\nexport { dijkstra };\n\nvar DEFAULT_WEIGHT_FUNC = _.constant(1);\n\nfunction dijkstra(g, source, weightFn, edgeFn) {\n  return runDijkstra(g, String(source), weightFn || DEFAULT_WEIGHT_FUNC, edgeFn || function (v) {\n    return g.outEdges(v);\n  });\n}\n\nfunction runDijkstra(g, source, weightFn, edgeFn) {\n  var results = {};\n  var pq = new PriorityQueue();\n  var v, vEntry;\n\n  var updateNeighbors = function (edge) {\n    var w = edge.v !== v ? edge.v : edge.w;\n    var wEntry = results[w];\n    var weight = weightFn(edge);\n    var distance = vEntry.distance + weight;\n\n    if (weight < 0) {\n      throw new Error('dijkstra does not allow negative edge weights. ' + 'Bad edge: ' + edge + ' Weight: ' + weight);\n    }\n\n    if (distance < wEntry.distance) {\n      wEntry.distance = distance;\n      wEntry.predecessor = v;\n      pq.decrease(w, distance);\n    }\n  };\n\n  g.nodes().forEach(function (v) {\n    var distance = v === source ? 0 : Number.POSITIVE_INFINITY;\n    results[v] = {\n      distance: distance\n    };\n    pq.add(v, distance);\n  });\n\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    vEntry = results[v];\n\n    if (vEntry.distance === Number.POSITIVE_INFINITY) {\n      break;\n    }\n\n    edgeFn(v).forEach(updateNeighbors);\n  }\n\n  return results;\n}","map":{"version":3,"names":["_","PriorityQueue","dijkstra","DEFAULT_WEIGHT_FUNC","constant","g","source","weightFn","edgeFn","runDijkstra","String","v","outEdges","results","pq","vEntry","updateNeighbors","edge","w","wEntry","weight","distance","Error","predecessor","decrease","nodes","forEach","Number","POSITIVE_INFINITY","add","size","removeMin"],"sources":["/Users/lord/Documents/Programmer/vue/VueProjects/cloudycraft-vue/blog-web/node_modules/dagre-d3-es/src/graphlib/alg/dijkstra.js"],"sourcesContent":["import * as _ from 'lodash-es';\nimport { PriorityQueue } from '../data/priority-queue.js';\n\nexport { dijkstra };\n\nvar DEFAULT_WEIGHT_FUNC = _.constant(1);\n\nfunction dijkstra(g, source, weightFn, edgeFn) {\n  return runDijkstra(\n    g,\n    String(source),\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn ||\n      function (v) {\n        return g.outEdges(v);\n      }\n  );\n}\n\nfunction runDijkstra(g, source, weightFn, edgeFn) {\n  var results = {};\n  var pq = new PriorityQueue();\n  var v, vEntry;\n\n  var updateNeighbors = function (edge) {\n    var w = edge.v !== v ? edge.v : edge.w;\n    var wEntry = results[w];\n    var weight = weightFn(edge);\n    var distance = vEntry.distance + weight;\n\n    if (weight < 0) {\n      throw new Error(\n        'dijkstra does not allow negative edge weights. ' +\n          'Bad edge: ' +\n          edge +\n          ' Weight: ' +\n          weight\n      );\n    }\n\n    if (distance < wEntry.distance) {\n      wEntry.distance = distance;\n      wEntry.predecessor = v;\n      pq.decrease(w, distance);\n    }\n  };\n\n  g.nodes().forEach(function (v) {\n    var distance = v === source ? 0 : Number.POSITIVE_INFINITY;\n    results[v] = { distance: distance };\n    pq.add(v, distance);\n  });\n\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    vEntry = results[v];\n    if (vEntry.distance === Number.POSITIVE_INFINITY) {\n      break;\n    }\n\n    edgeFn(v).forEach(updateNeighbors);\n  }\n\n  return results;\n}\n"],"mappings":"AAAA,OAAO,KAAKA,CAAZ,MAAmB,WAAnB;AACA,SAASC,aAAT,QAA8B,2BAA9B;AAEA,SAASC,QAAT;;AAEA,IAAIC,mBAAmB,GAAGH,CAAC,CAACI,QAAF,CAAW,CAAX,CAA1B;;AAEA,SAASF,QAAT,CAAkBG,CAAlB,EAAqBC,MAArB,EAA6BC,QAA7B,EAAuCC,MAAvC,EAA+C;EAC7C,OAAOC,WAAW,CAChBJ,CADgB,EAEhBK,MAAM,CAACJ,MAAD,CAFU,EAGhBC,QAAQ,IAAIJ,mBAHI,EAIhBK,MAAM,IACJ,UAAUG,CAAV,EAAa;IACX,OAAON,CAAC,CAACO,QAAF,CAAWD,CAAX,CAAP;EACD,CAPa,CAAlB;AASD;;AAED,SAASF,WAAT,CAAqBJ,CAArB,EAAwBC,MAAxB,EAAgCC,QAAhC,EAA0CC,MAA1C,EAAkD;EAChD,IAAIK,OAAO,GAAG,EAAd;EACA,IAAIC,EAAE,GAAG,IAAIb,aAAJ,EAAT;EACA,IAAIU,CAAJ,EAAOI,MAAP;;EAEA,IAAIC,eAAe,GAAG,UAAUC,IAAV,EAAgB;IACpC,IAAIC,CAAC,GAAGD,IAAI,CAACN,CAAL,KAAWA,CAAX,GAAeM,IAAI,CAACN,CAApB,GAAwBM,IAAI,CAACC,CAArC;IACA,IAAIC,MAAM,GAAGN,OAAO,CAACK,CAAD,CAApB;IACA,IAAIE,MAAM,GAAGb,QAAQ,CAACU,IAAD,CAArB;IACA,IAAII,QAAQ,GAAGN,MAAM,CAACM,QAAP,GAAkBD,MAAjC;;IAEA,IAAIA,MAAM,GAAG,CAAb,EAAgB;MACd,MAAM,IAAIE,KAAJ,CACJ,oDACE,YADF,GAEEL,IAFF,GAGE,WAHF,GAIEG,MALE,CAAN;IAOD;;IAED,IAAIC,QAAQ,GAAGF,MAAM,CAACE,QAAtB,EAAgC;MAC9BF,MAAM,CAACE,QAAP,GAAkBA,QAAlB;MACAF,MAAM,CAACI,WAAP,GAAqBZ,CAArB;MACAG,EAAE,CAACU,QAAH,CAAYN,CAAZ,EAAeG,QAAf;IACD;EACF,CArBD;;EAuBAhB,CAAC,CAACoB,KAAF,GAAUC,OAAV,CAAkB,UAAUf,CAAV,EAAa;IAC7B,IAAIU,QAAQ,GAAGV,CAAC,KAAKL,MAAN,GAAe,CAAf,GAAmBqB,MAAM,CAACC,iBAAzC;IACAf,OAAO,CAACF,CAAD,CAAP,GAAa;MAAEU,QAAQ,EAAEA;IAAZ,CAAb;IACAP,EAAE,CAACe,GAAH,CAAOlB,CAAP,EAAUU,QAAV;EACD,CAJD;;EAMA,OAAOP,EAAE,CAACgB,IAAH,KAAY,CAAnB,EAAsB;IACpBnB,CAAC,GAAGG,EAAE,CAACiB,SAAH,EAAJ;IACAhB,MAAM,GAAGF,OAAO,CAACF,CAAD,CAAhB;;IACA,IAAII,MAAM,CAACM,QAAP,KAAoBM,MAAM,CAACC,iBAA/B,EAAkD;MAChD;IACD;;IAEDpB,MAAM,CAACG,CAAD,CAAN,CAAUe,OAAV,CAAkBV,eAAlB;EACD;;EAED,OAAOH,OAAP;AACD"},"metadata":{},"sourceType":"module"}