{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sanitizeUrl = exports.BLANK_URL = void 0;\nvar invalidProtocolRegex = /^([^\\w]*)(javascript|data|vbscript)/im;\nvar htmlEntitiesRegex = /&#(\\w+)(^\\w|;)?/g;\nvar htmlCtrlEntityRegex = /&(newline|tab);/gi;\nvar ctrlCharactersRegex = /[\\u0000-\\u001F\\u007F-\\u009F\\u2000-\\u200D\\uFEFF]/gim;\nvar urlSchemeRegex = /^.+(:|&colon;)/gim;\nvar relativeFirstCharacters = [\".\", \"/\"];\nexports.BLANK_URL = \"about:blank\";\n\nfunction isRelativeUrlWithoutProtocol(url) {\n  return relativeFirstCharacters.indexOf(url[0]) > -1;\n} // adapted from https://stackoverflow.com/a/29824550/2601552\n\n\nfunction decodeHtmlCharacters(str) {\n  var removedNullByte = str.replace(ctrlCharactersRegex, \"\");\n  return removedNullByte.replace(htmlEntitiesRegex, function (match, dec) {\n    return String.fromCharCode(dec);\n  });\n}\n\nfunction sanitizeUrl(url) {\n  if (!url) {\n    return exports.BLANK_URL;\n  }\n\n  var sanitizedUrl = decodeHtmlCharacters(url).replace(htmlCtrlEntityRegex, \"\").replace(ctrlCharactersRegex, \"\").trim();\n\n  if (!sanitizedUrl) {\n    return exports.BLANK_URL;\n  }\n\n  if (isRelativeUrlWithoutProtocol(sanitizedUrl)) {\n    return sanitizedUrl;\n  }\n\n  var urlSchemeParseResults = sanitizedUrl.match(urlSchemeRegex);\n\n  if (!urlSchemeParseResults) {\n    return sanitizedUrl;\n  }\n\n  var urlScheme = urlSchemeParseResults[0];\n\n  if (invalidProtocolRegex.test(urlScheme)) {\n    return exports.BLANK_URL;\n  }\n\n  return sanitizedUrl;\n}\n\nexports.sanitizeUrl = sanitizeUrl;","map":null,"metadata":{},"sourceType":"script"}