{"ast":null,"code":"// Process footnotes\n//\n'use strict'; ////////////////////////////////////////////////////////////////////////////////\n// Renderer partials\n\nfunction render_footnote_anchor_name(tokens, idx, options, env\n/*, slf*/\n) {\n  var n = Number(tokens[idx].meta.id + 1).toString();\n  var prefix = '';\n\n  if (typeof env.docId === 'string') {\n    prefix = '-' + env.docId + '-';\n  }\n\n  return prefix + n;\n}\n\nfunction render_footnote_caption(tokens, idx\n/*, options, env, slf*/\n) {\n  var n = Number(tokens[idx].meta.id + 1).toString();\n\n  if (tokens[idx].meta.subId > 0) {\n    n += ':' + tokens[idx].meta.subId;\n  }\n\n  return '[' + n + ']';\n}\n\nfunction render_footnote_ref(tokens, idx, options, env, slf) {\n  var id = slf.rules.footnote_anchor_name(tokens, idx, options, env, slf);\n  var caption = slf.rules.footnote_caption(tokens, idx, options, env, slf);\n  var refid = id;\n\n  if (tokens[idx].meta.subId > 0) {\n    refid += ':' + tokens[idx].meta.subId;\n  }\n\n  return '<sup class=\"footnote-ref\"><a href=\"#fn' + id + '\" id=\"fnref' + refid + '\">' + caption + '</a></sup>';\n}\n\nfunction render_footnote_block_open(tokens, idx, options) {\n  return (options.xhtmlOut ? '<hr class=\"footnotes-sep\" />\\n' : '<hr class=\"footnotes-sep\">\\n') + '<section class=\"footnotes\">\\n' + '<ol class=\"footnotes-list\">\\n';\n}\n\nfunction render_footnote_block_close() {\n  return '</ol>\\n</section>\\n';\n}\n\nfunction render_footnote_open(tokens, idx, options, env, slf) {\n  var id = slf.rules.footnote_anchor_name(tokens, idx, options, env, slf);\n\n  if (tokens[idx].meta.subId > 0) {\n    id += ':' + tokens[idx].meta.subId;\n  }\n\n  return '<li id=\"fn' + id + '\" class=\"footnote-item\">';\n}\n\nfunction render_footnote_close() {\n  return '</li>\\n';\n}\n\nfunction render_footnote_anchor(tokens, idx, options, env, slf) {\n  var id = slf.rules.footnote_anchor_name(tokens, idx, options, env, slf);\n\n  if (tokens[idx].meta.subId > 0) {\n    id += ':' + tokens[idx].meta.subId;\n  }\n  /* ↩ with escape code to prevent display as Apple Emoji on iOS */\n\n\n  return ' <a href=\"#fnref' + id + '\" class=\"footnote-backref\">\\u21a9\\uFE0E</a>';\n}\n\nmodule.exports = function footnote_plugin(md) {\n  var parseLinkLabel = md.helpers.parseLinkLabel,\n      isSpace = md.utils.isSpace;\n  md.renderer.rules.footnote_ref = render_footnote_ref;\n  md.renderer.rules.footnote_block_open = render_footnote_block_open;\n  md.renderer.rules.footnote_block_close = render_footnote_block_close;\n  md.renderer.rules.footnote_open = render_footnote_open;\n  md.renderer.rules.footnote_close = render_footnote_close;\n  md.renderer.rules.footnote_anchor = render_footnote_anchor; // helpers (only used in other rules, no tokens are attached to those)\n\n  md.renderer.rules.footnote_caption = render_footnote_caption;\n  md.renderer.rules.footnote_anchor_name = render_footnote_anchor_name; // Process footnote block definition\n\n  function footnote_def(state, startLine, endLine, silent) {\n    var oldBMark,\n        oldTShift,\n        oldSCount,\n        oldParentType,\n        pos,\n        label,\n        token,\n        initial,\n        offset,\n        ch,\n        posAfterColon,\n        start = state.bMarks[startLine] + state.tShift[startLine],\n        max = state.eMarks[startLine]; // line should be at least 5 chars - \"[^x]:\"\n\n    if (start + 4 > max) {\n      return false;\n    }\n\n    if (state.src.charCodeAt(start) !== 0x5B\n    /* [ */\n    ) {\n      return false;\n    }\n\n    if (state.src.charCodeAt(start + 1) !== 0x5E\n    /* ^ */\n    ) {\n      return false;\n    }\n\n    for (pos = start + 2; pos < max; pos++) {\n      if (state.src.charCodeAt(pos) === 0x20) {\n        return false;\n      }\n\n      if (state.src.charCodeAt(pos) === 0x5D\n      /* ] */\n      ) {\n        break;\n      }\n    }\n\n    if (pos === start + 2) {\n      return false;\n    } // no empty footnote labels\n\n\n    if (pos + 1 >= max || state.src.charCodeAt(++pos) !== 0x3A\n    /* : */\n    ) {\n      return false;\n    }\n\n    if (silent) {\n      return true;\n    }\n\n    pos++;\n\n    if (!state.env.footnotes) {\n      state.env.footnotes = {};\n    }\n\n    if (!state.env.footnotes.refs) {\n      state.env.footnotes.refs = {};\n    }\n\n    label = state.src.slice(start + 2, pos - 2);\n    state.env.footnotes.refs[':' + label] = -1;\n    token = new state.Token('footnote_reference_open', '', 1);\n    token.meta = {\n      label: label\n    };\n    token.level = state.level++;\n    state.tokens.push(token);\n    oldBMark = state.bMarks[startLine];\n    oldTShift = state.tShift[startLine];\n    oldSCount = state.sCount[startLine];\n    oldParentType = state.parentType;\n    posAfterColon = pos;\n    initial = offset = state.sCount[startLine] + pos - (state.bMarks[startLine] + state.tShift[startLine]);\n\n    while (pos < max) {\n      ch = state.src.charCodeAt(pos);\n\n      if (isSpace(ch)) {\n        if (ch === 0x09) {\n          offset += 4 - offset % 4;\n        } else {\n          offset++;\n        }\n      } else {\n        break;\n      }\n\n      pos++;\n    }\n\n    state.tShift[startLine] = pos - posAfterColon;\n    state.sCount[startLine] = offset - initial;\n    state.bMarks[startLine] = posAfterColon;\n    state.blkIndent += 4;\n    state.parentType = 'footnote';\n\n    if (state.sCount[startLine] < state.blkIndent) {\n      state.sCount[startLine] += state.blkIndent;\n    }\n\n    state.md.block.tokenize(state, startLine, endLine, true);\n    state.parentType = oldParentType;\n    state.blkIndent -= 4;\n    state.tShift[startLine] = oldTShift;\n    state.sCount[startLine] = oldSCount;\n    state.bMarks[startLine] = oldBMark;\n    token = new state.Token('footnote_reference_close', '', -1);\n    token.level = --state.level;\n    state.tokens.push(token);\n    return true;\n  } // Process inline footnotes (^[...])\n\n\n  function footnote_inline(state, silent) {\n    var labelStart,\n        labelEnd,\n        footnoteId,\n        token,\n        tokens,\n        max = state.posMax,\n        start = state.pos;\n\n    if (start + 2 >= max) {\n      return false;\n    }\n\n    if (state.src.charCodeAt(start) !== 0x5E\n    /* ^ */\n    ) {\n      return false;\n    }\n\n    if (state.src.charCodeAt(start + 1) !== 0x5B\n    /* [ */\n    ) {\n      return false;\n    }\n\n    labelStart = start + 2;\n    labelEnd = parseLinkLabel(state, start + 1); // parser failed to find ']', so it's not a valid note\n\n    if (labelEnd < 0) {\n      return false;\n    } // We found the end of the link, and know for a fact it's a valid link;\n    // so all that's left to do is to call tokenizer.\n    //\n\n\n    if (!silent) {\n      if (!state.env.footnotes) {\n        state.env.footnotes = {};\n      }\n\n      if (!state.env.footnotes.list) {\n        state.env.footnotes.list = [];\n      }\n\n      footnoteId = state.env.footnotes.list.length;\n      state.md.inline.parse(state.src.slice(labelStart, labelEnd), state.md, state.env, tokens = []);\n      token = state.push('footnote_ref', '', 0);\n      token.meta = {\n        id: footnoteId\n      };\n      state.env.footnotes.list[footnoteId] = {\n        content: state.src.slice(labelStart, labelEnd),\n        tokens: tokens\n      };\n    }\n\n    state.pos = labelEnd + 1;\n    state.posMax = max;\n    return true;\n  } // Process footnote references ([^...])\n\n\n  function footnote_ref(state, silent) {\n    var label,\n        pos,\n        footnoteId,\n        footnoteSubId,\n        token,\n        max = state.posMax,\n        start = state.pos; // should be at least 4 chars - \"[^x]\"\n\n    if (start + 3 > max) {\n      return false;\n    }\n\n    if (!state.env.footnotes || !state.env.footnotes.refs) {\n      return false;\n    }\n\n    if (state.src.charCodeAt(start) !== 0x5B\n    /* [ */\n    ) {\n      return false;\n    }\n\n    if (state.src.charCodeAt(start + 1) !== 0x5E\n    /* ^ */\n    ) {\n      return false;\n    }\n\n    for (pos = start + 2; pos < max; pos++) {\n      if (state.src.charCodeAt(pos) === 0x20) {\n        return false;\n      }\n\n      if (state.src.charCodeAt(pos) === 0x0A) {\n        return false;\n      }\n\n      if (state.src.charCodeAt(pos) === 0x5D\n      /* ] */\n      ) {\n        break;\n      }\n    }\n\n    if (pos === start + 2) {\n      return false;\n    } // no empty footnote labels\n\n\n    if (pos >= max) {\n      return false;\n    }\n\n    pos++;\n    label = state.src.slice(start + 2, pos - 1);\n\n    if (typeof state.env.footnotes.refs[':' + label] === 'undefined') {\n      return false;\n    }\n\n    if (!silent) {\n      if (!state.env.footnotes.list) {\n        state.env.footnotes.list = [];\n      }\n\n      if (state.env.footnotes.refs[':' + label] < 0) {\n        footnoteId = state.env.footnotes.list.length;\n        state.env.footnotes.list[footnoteId] = {\n          label: label,\n          count: 0\n        };\n        state.env.footnotes.refs[':' + label] = footnoteId;\n      } else {\n        footnoteId = state.env.footnotes.refs[':' + label];\n      }\n\n      footnoteSubId = state.env.footnotes.list[footnoteId].count;\n      state.env.footnotes.list[footnoteId].count++;\n      token = state.push('footnote_ref', '', 0);\n      token.meta = {\n        id: footnoteId,\n        subId: footnoteSubId,\n        label: label\n      };\n    }\n\n    state.pos = pos;\n    state.posMax = max;\n    return true;\n  } // Glue footnote tokens to end of token stream\n\n\n  function footnote_tail(state) {\n    var i,\n        l,\n        j,\n        t,\n        lastParagraph,\n        list,\n        token,\n        tokens,\n        current,\n        currentLabel,\n        insideRef = false,\n        refTokens = {};\n\n    if (!state.env.footnotes) {\n      return;\n    }\n\n    state.tokens = state.tokens.filter(function (tok) {\n      if (tok.type === 'footnote_reference_open') {\n        insideRef = true;\n        current = [];\n        currentLabel = tok.meta.label;\n        return false;\n      }\n\n      if (tok.type === 'footnote_reference_close') {\n        insideRef = false; // prepend ':' to avoid conflict with Object.prototype members\n\n        refTokens[':' + currentLabel] = current;\n        return false;\n      }\n\n      if (insideRef) {\n        current.push(tok);\n      }\n\n      return !insideRef;\n    });\n\n    if (!state.env.footnotes.list) {\n      return;\n    }\n\n    list = state.env.footnotes.list;\n    token = new state.Token('footnote_block_open', '', 1);\n    state.tokens.push(token);\n\n    for (i = 0, l = list.length; i < l; i++) {\n      token = new state.Token('footnote_open', '', 1);\n      token.meta = {\n        id: i,\n        label: list[i].label\n      };\n      state.tokens.push(token);\n\n      if (list[i].tokens) {\n        tokens = [];\n        token = new state.Token('paragraph_open', 'p', 1);\n        token.block = true;\n        tokens.push(token);\n        token = new state.Token('inline', '', 0);\n        token.children = list[i].tokens;\n        token.content = list[i].content;\n        tokens.push(token);\n        token = new state.Token('paragraph_close', 'p', -1);\n        token.block = true;\n        tokens.push(token);\n      } else if (list[i].label) {\n        tokens = refTokens[':' + list[i].label];\n      }\n\n      if (tokens) state.tokens = state.tokens.concat(tokens);\n\n      if (state.tokens[state.tokens.length - 1].type === 'paragraph_close') {\n        lastParagraph = state.tokens.pop();\n      } else {\n        lastParagraph = null;\n      }\n\n      t = list[i].count > 0 ? list[i].count : 1;\n\n      for (j = 0; j < t; j++) {\n        token = new state.Token('footnote_anchor', '', 0);\n        token.meta = {\n          id: i,\n          subId: j,\n          label: list[i].label\n        };\n        state.tokens.push(token);\n      }\n\n      if (lastParagraph) {\n        state.tokens.push(lastParagraph);\n      }\n\n      token = new state.Token('footnote_close', '', -1);\n      state.tokens.push(token);\n    }\n\n    token = new state.Token('footnote_block_close', '', -1);\n    state.tokens.push(token);\n  }\n\n  md.block.ruler.before('reference', 'footnote_def', footnote_def, {\n    alt: ['paragraph', 'reference']\n  });\n  md.inline.ruler.after('image', 'footnote_inline', footnote_inline);\n  md.inline.ruler.after('footnote_inline', 'footnote_ref', footnote_ref);\n  md.core.ruler.after('inline', 'footnote_tail', footnote_tail);\n};","map":{"version":3,"names":["render_footnote_anchor_name","tokens","idx","options","env","n","Number","meta","id","toString","prefix","docId","render_footnote_caption","subId","render_footnote_ref","slf","rules","footnote_anchor_name","caption","footnote_caption","refid","render_footnote_block_open","xhtmlOut","render_footnote_block_close","render_footnote_open","render_footnote_close","render_footnote_anchor","module","exports","footnote_plugin","md","parseLinkLabel","helpers","isSpace","utils","renderer","footnote_ref","footnote_block_open","footnote_block_close","footnote_open","footnote_close","footnote_anchor","footnote_def","state","startLine","endLine","silent","oldBMark","oldTShift","oldSCount","oldParentType","pos","label","token","initial","offset","ch","posAfterColon","start","bMarks","tShift","max","eMarks","src","charCodeAt","footnotes","refs","slice","Token","level","push","sCount","parentType","blkIndent","block","tokenize","footnote_inline","labelStart","labelEnd","footnoteId","posMax","list","length","inline","parse","content","footnoteSubId","count","footnote_tail","i","l","j","t","lastParagraph","current","currentLabel","insideRef","refTokens","filter","tok","type","children","concat","pop","ruler","before","alt","after","core"],"sources":["/Users/lord/Documents/Programmer/vue/VueProjects/cloudycraft-vue/blog-web/node_modules/markdown-it-footnote/index.js"],"sourcesContent":["// Process footnotes\n//\n'use strict';\n\n////////////////////////////////////////////////////////////////////////////////\n// Renderer partials\n\nfunction render_footnote_anchor_name(tokens, idx, options, env/*, slf*/) {\n  var n = Number(tokens[idx].meta.id + 1).toString();\n  var prefix = '';\n\n  if (typeof env.docId === 'string') {\n    prefix = '-' + env.docId + '-';\n  }\n\n  return prefix + n;\n}\n\nfunction render_footnote_caption(tokens, idx/*, options, env, slf*/) {\n  var n = Number(tokens[idx].meta.id + 1).toString();\n\n  if (tokens[idx].meta.subId > 0) {\n    n += ':' + tokens[idx].meta.subId;\n  }\n\n  return '[' + n + ']';\n}\n\nfunction render_footnote_ref(tokens, idx, options, env, slf) {\n  var id      = slf.rules.footnote_anchor_name(tokens, idx, options, env, slf);\n  var caption = slf.rules.footnote_caption(tokens, idx, options, env, slf);\n  var refid   = id;\n\n  if (tokens[idx].meta.subId > 0) {\n    refid += ':' + tokens[idx].meta.subId;\n  }\n\n  return '<sup class=\"footnote-ref\"><a href=\"#fn' + id + '\" id=\"fnref' + refid + '\">' + caption + '</a></sup>';\n}\n\nfunction render_footnote_block_open(tokens, idx, options) {\n  return (options.xhtmlOut ? '<hr class=\"footnotes-sep\" />\\n' : '<hr class=\"footnotes-sep\">\\n') +\n         '<section class=\"footnotes\">\\n' +\n         '<ol class=\"footnotes-list\">\\n';\n}\n\nfunction render_footnote_block_close() {\n  return '</ol>\\n</section>\\n';\n}\n\nfunction render_footnote_open(tokens, idx, options, env, slf) {\n  var id = slf.rules.footnote_anchor_name(tokens, idx, options, env, slf);\n\n  if (tokens[idx].meta.subId > 0) {\n    id += ':' + tokens[idx].meta.subId;\n  }\n\n  return '<li id=\"fn' + id + '\" class=\"footnote-item\">';\n}\n\nfunction render_footnote_close() {\n  return '</li>\\n';\n}\n\nfunction render_footnote_anchor(tokens, idx, options, env, slf) {\n  var id = slf.rules.footnote_anchor_name(tokens, idx, options, env, slf);\n\n  if (tokens[idx].meta.subId > 0) {\n    id += ':' + tokens[idx].meta.subId;\n  }\n\n  /* ↩ with escape code to prevent display as Apple Emoji on iOS */\n  return ' <a href=\"#fnref' + id + '\" class=\"footnote-backref\">\\u21a9\\uFE0E</a>';\n}\n\n\nmodule.exports = function footnote_plugin(md) {\n  var parseLinkLabel = md.helpers.parseLinkLabel,\n      isSpace = md.utils.isSpace;\n\n  md.renderer.rules.footnote_ref          = render_footnote_ref;\n  md.renderer.rules.footnote_block_open   = render_footnote_block_open;\n  md.renderer.rules.footnote_block_close  = render_footnote_block_close;\n  md.renderer.rules.footnote_open         = render_footnote_open;\n  md.renderer.rules.footnote_close        = render_footnote_close;\n  md.renderer.rules.footnote_anchor       = render_footnote_anchor;\n\n  // helpers (only used in other rules, no tokens are attached to those)\n  md.renderer.rules.footnote_caption      = render_footnote_caption;\n  md.renderer.rules.footnote_anchor_name  = render_footnote_anchor_name;\n\n  // Process footnote block definition\n  function footnote_def(state, startLine, endLine, silent) {\n    var oldBMark, oldTShift, oldSCount, oldParentType, pos, label, token,\n        initial, offset, ch, posAfterColon,\n        start = state.bMarks[startLine] + state.tShift[startLine],\n        max = state.eMarks[startLine];\n\n    // line should be at least 5 chars - \"[^x]:\"\n    if (start + 4 > max) { return false; }\n\n    if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n    if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n\n    for (pos = start + 2; pos < max; pos++) {\n      if (state.src.charCodeAt(pos) === 0x20) { return false; }\n      if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n        break;\n      }\n    }\n\n    if (pos === start + 2) { return false; } // no empty footnote labels\n    if (pos + 1 >= max || state.src.charCodeAt(++pos) !== 0x3A /* : */) { return false; }\n    if (silent) { return true; }\n    pos++;\n\n    if (!state.env.footnotes) { state.env.footnotes = {}; }\n    if (!state.env.footnotes.refs) { state.env.footnotes.refs = {}; }\n    label = state.src.slice(start + 2, pos - 2);\n    state.env.footnotes.refs[':' + label] = -1;\n\n    token       = new state.Token('footnote_reference_open', '', 1);\n    token.meta  = { label: label };\n    token.level = state.level++;\n    state.tokens.push(token);\n\n    oldBMark = state.bMarks[startLine];\n    oldTShift = state.tShift[startLine];\n    oldSCount = state.sCount[startLine];\n    oldParentType = state.parentType;\n\n    posAfterColon = pos;\n    initial = offset = state.sCount[startLine] + pos - (state.bMarks[startLine] + state.tShift[startLine]);\n\n    while (pos < max) {\n      ch = state.src.charCodeAt(pos);\n\n      if (isSpace(ch)) {\n        if (ch === 0x09) {\n          offset += 4 - offset % 4;\n        } else {\n          offset++;\n        }\n      } else {\n        break;\n      }\n\n      pos++;\n    }\n\n    state.tShift[startLine] = pos - posAfterColon;\n    state.sCount[startLine] = offset - initial;\n\n    state.bMarks[startLine] = posAfterColon;\n    state.blkIndent += 4;\n    state.parentType = 'footnote';\n\n    if (state.sCount[startLine] < state.blkIndent) {\n      state.sCount[startLine] += state.blkIndent;\n    }\n\n    state.md.block.tokenize(state, startLine, endLine, true);\n\n    state.parentType = oldParentType;\n    state.blkIndent -= 4;\n    state.tShift[startLine] = oldTShift;\n    state.sCount[startLine] = oldSCount;\n    state.bMarks[startLine] = oldBMark;\n\n    token       = new state.Token('footnote_reference_close', '', -1);\n    token.level = --state.level;\n    state.tokens.push(token);\n\n    return true;\n  }\n\n  // Process inline footnotes (^[...])\n  function footnote_inline(state, silent) {\n    var labelStart,\n        labelEnd,\n        footnoteId,\n        token,\n        tokens,\n        max = state.posMax,\n        start = state.pos;\n\n    if (start + 2 >= max) { return false; }\n    if (state.src.charCodeAt(start) !== 0x5E/* ^ */) { return false; }\n    if (state.src.charCodeAt(start + 1) !== 0x5B/* [ */) { return false; }\n\n    labelStart = start + 2;\n    labelEnd = parseLinkLabel(state, start + 1);\n\n    // parser failed to find ']', so it's not a valid note\n    if (labelEnd < 0) { return false; }\n\n    // We found the end of the link, and know for a fact it's a valid link;\n    // so all that's left to do is to call tokenizer.\n    //\n    if (!silent) {\n      if (!state.env.footnotes) { state.env.footnotes = {}; }\n      if (!state.env.footnotes.list) { state.env.footnotes.list = []; }\n      footnoteId = state.env.footnotes.list.length;\n\n      state.md.inline.parse(\n        state.src.slice(labelStart, labelEnd),\n        state.md,\n        state.env,\n        tokens = []\n      );\n\n      token      = state.push('footnote_ref', '', 0);\n      token.meta = { id: footnoteId };\n\n      state.env.footnotes.list[footnoteId] = {\n        content: state.src.slice(labelStart, labelEnd),\n        tokens: tokens\n      };\n    }\n\n    state.pos = labelEnd + 1;\n    state.posMax = max;\n    return true;\n  }\n\n  // Process footnote references ([^...])\n  function footnote_ref(state, silent) {\n    var label,\n        pos,\n        footnoteId,\n        footnoteSubId,\n        token,\n        max = state.posMax,\n        start = state.pos;\n\n    // should be at least 4 chars - \"[^x]\"\n    if (start + 3 > max) { return false; }\n\n    if (!state.env.footnotes || !state.env.footnotes.refs) { return false; }\n    if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n    if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n\n    for (pos = start + 2; pos < max; pos++) {\n      if (state.src.charCodeAt(pos) === 0x20) { return false; }\n      if (state.src.charCodeAt(pos) === 0x0A) { return false; }\n      if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n        break;\n      }\n    }\n\n    if (pos === start + 2) { return false; } // no empty footnote labels\n    if (pos >= max) { return false; }\n    pos++;\n\n    label = state.src.slice(start + 2, pos - 1);\n    if (typeof state.env.footnotes.refs[':' + label] === 'undefined') { return false; }\n\n    if (!silent) {\n      if (!state.env.footnotes.list) { state.env.footnotes.list = []; }\n\n      if (state.env.footnotes.refs[':' + label] < 0) {\n        footnoteId = state.env.footnotes.list.length;\n        state.env.footnotes.list[footnoteId] = { label: label, count: 0 };\n        state.env.footnotes.refs[':' + label] = footnoteId;\n      } else {\n        footnoteId = state.env.footnotes.refs[':' + label];\n      }\n\n      footnoteSubId = state.env.footnotes.list[footnoteId].count;\n      state.env.footnotes.list[footnoteId].count++;\n\n      token      = state.push('footnote_ref', '', 0);\n      token.meta = { id: footnoteId, subId: footnoteSubId, label: label };\n    }\n\n    state.pos = pos;\n    state.posMax = max;\n    return true;\n  }\n\n  // Glue footnote tokens to end of token stream\n  function footnote_tail(state) {\n    var i, l, j, t, lastParagraph, list, token, tokens, current, currentLabel,\n        insideRef = false,\n        refTokens = {};\n\n    if (!state.env.footnotes) { return; }\n\n    state.tokens = state.tokens.filter(function (tok) {\n      if (tok.type === 'footnote_reference_open') {\n        insideRef = true;\n        current = [];\n        currentLabel = tok.meta.label;\n        return false;\n      }\n      if (tok.type === 'footnote_reference_close') {\n        insideRef = false;\n        // prepend ':' to avoid conflict with Object.prototype members\n        refTokens[':' + currentLabel] = current;\n        return false;\n      }\n      if (insideRef) { current.push(tok); }\n      return !insideRef;\n    });\n\n    if (!state.env.footnotes.list) { return; }\n    list = state.env.footnotes.list;\n\n    token = new state.Token('footnote_block_open', '', 1);\n    state.tokens.push(token);\n\n    for (i = 0, l = list.length; i < l; i++) {\n      token      = new state.Token('footnote_open', '', 1);\n      token.meta = { id: i, label: list[i].label };\n      state.tokens.push(token);\n\n      if (list[i].tokens) {\n        tokens = [];\n\n        token          = new state.Token('paragraph_open', 'p', 1);\n        token.block    = true;\n        tokens.push(token);\n\n        token          = new state.Token('inline', '', 0);\n        token.children = list[i].tokens;\n        token.content  = list[i].content;\n        tokens.push(token);\n\n        token          = new state.Token('paragraph_close', 'p', -1);\n        token.block    = true;\n        tokens.push(token);\n\n      } else if (list[i].label) {\n        tokens = refTokens[':' + list[i].label];\n      }\n\n      if (tokens) state.tokens = state.tokens.concat(tokens);\n      if (state.tokens[state.tokens.length - 1].type === 'paragraph_close') {\n        lastParagraph = state.tokens.pop();\n      } else {\n        lastParagraph = null;\n      }\n\n      t = list[i].count > 0 ? list[i].count : 1;\n      for (j = 0; j < t; j++) {\n        token      = new state.Token('footnote_anchor', '', 0);\n        token.meta = { id: i, subId: j, label: list[i].label };\n        state.tokens.push(token);\n      }\n\n      if (lastParagraph) {\n        state.tokens.push(lastParagraph);\n      }\n\n      token = new state.Token('footnote_close', '', -1);\n      state.tokens.push(token);\n    }\n\n    token = new state.Token('footnote_block_close', '', -1);\n    state.tokens.push(token);\n  }\n\n  md.block.ruler.before('reference', 'footnote_def', footnote_def, { alt: [ 'paragraph', 'reference' ] });\n  md.inline.ruler.after('image', 'footnote_inline', footnote_inline);\n  md.inline.ruler.after('footnote_inline', 'footnote_ref', footnote_ref);\n  md.core.ruler.after('inline', 'footnote_tail', footnote_tail);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}