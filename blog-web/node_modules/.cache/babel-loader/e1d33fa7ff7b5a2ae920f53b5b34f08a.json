{"ast":null,"code":"import { defineComponent, getCurrentInstance, inject, watch, onUnmounted, onUpdated, h } from 'vue';\nimport { isClient } from '@vueuse/core';\nimport '../../../../utils/index.mjs';\nimport '../../../../hooks/index.mjs';\nimport useLayoutObserver from '../layout-observer.mjs';\nimport { removePopper } from '../util.mjs';\nimport { TABLE_INJECTION_KEY } from '../tokens.mjs';\nimport useRender from './render-helper.mjs';\nimport defaultProps from './defaults.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nimport { removeClass, addClass } from '../../../../utils/dom/style.mjs';\nvar TableBody = defineComponent({\n  name: \"ElTableBody\",\n  props: defaultProps,\n\n  setup(props) {\n    const instance = getCurrentInstance();\n    const parent = inject(TABLE_INJECTION_KEY);\n    const ns = useNamespace(\"table\");\n    const {\n      wrappedRowRender,\n      tooltipContent,\n      tooltipTrigger\n    } = useRender(props);\n    const {\n      onColumnsChange,\n      onScrollableChange\n    } = useLayoutObserver(parent);\n    watch(props.store.states.hoverRow, (newVal, oldVal) => {\n      if (!props.store.states.isComplex.value || !isClient) return;\n      let raf = window.requestAnimationFrame;\n\n      if (!raf) {\n        raf = fn => window.setTimeout(fn, 16);\n      }\n\n      raf(() => {\n        var _a;\n\n        const rows = (_a = instance == null ? void 0 : instance.vnode.el) == null ? void 0 : _a.querySelectorAll(`.${ns.e(\"row\")}`);\n        const oldRow = rows[oldVal];\n        const newRow = rows[newVal];\n\n        if (oldRow) {\n          removeClass(oldRow, \"hover-row\");\n        }\n\n        if (newRow) {\n          addClass(newRow, \"hover-row\");\n        }\n      });\n    });\n    onUnmounted(() => {\n      var _a;\n\n      (_a = removePopper) == null ? void 0 : _a();\n    });\n    onUpdated(() => {\n      var _a;\n\n      (_a = removePopper) == null ? void 0 : _a();\n    });\n    return {\n      ns,\n      onColumnsChange,\n      onScrollableChange,\n      wrappedRowRender,\n      tooltipContent,\n      tooltipTrigger\n    };\n  },\n\n  render() {\n    const {\n      wrappedRowRender,\n      store\n    } = this;\n    const data = store.states.data.value || [];\n    return h(\"tbody\", {}, [data.reduce((acc, row) => {\n      return acc.concat(wrappedRowRender(row, acc.length));\n    }, [])]);\n  }\n\n});\nexport { TableBody as default };","map":null,"metadata":{},"sourceType":"module"}