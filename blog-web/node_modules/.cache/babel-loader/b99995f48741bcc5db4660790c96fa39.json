{"ast":null,"code":"// src/normalize.ts\nfunction isObject(v) {\n  return typeof v === \"object\" && v !== null;\n}\n\nfunction normalizeOptions(options, globalOptions) {\n  options = isObject(options) ? options : /* @__PURE__ */Object.create(null);\n  return new Proxy(options, {\n    get(target, key, receiver) {\n      return Reflect.get(target, key, receiver) || Reflect.get(globalOptions, key, receiver);\n    }\n\n  });\n} // src/pick.ts\n\n\nfunction get(state, path) {\n  return path.reduce((obj, p) => {\n    return obj == null ? void 0 : obj[p];\n  }, state);\n}\n\nfunction set(state, path, val) {\n  return path.slice(0, -1).reduce((obj, p) => {\n    if (!/^(__proto__)$/.test(p)) return obj[p] = obj[p] || {};else return {};\n  }, state)[path[path.length - 1]] = val, state;\n}\n\nfunction pick(baseState, paths) {\n  return paths.reduce((substate, path) => {\n    const pathArray = path.split(\".\");\n    return set(substate, pathArray, get(baseState, pathArray));\n  }, {});\n} // src/plugin.ts\n\n\nfunction createPersistedState(factoryOptions = {}) {\n  return function (context) {\n    const {\n      options: {\n        persist\n      },\n      store\n    } = context;\n    if (!persist) return;\n    const {\n      storage = localStorage,\n      beforeRestore = null,\n      afterRestore = null,\n      serializer = {\n        serialize: JSON.stringify,\n        deserialize: JSON.parse\n      },\n      key = store.$id,\n      paths = null\n    } = normalizeOptions(persist, factoryOptions);\n    beforeRestore == null ? void 0 : beforeRestore(context);\n\n    try {\n      const fromStorage = storage.getItem(key);\n      if (fromStorage) store.$patch(serializer.deserialize(fromStorage));\n    } catch (_error) {}\n\n    afterRestore == null ? void 0 : afterRestore(context);\n    store.$subscribe((_mutation, state) => {\n      try {\n        const toStore = Array.isArray(paths) ? pick(state, paths) : state;\n        storage.setItem(key, serializer.serialize(toStore));\n      } catch (_error) {}\n    }, {\n      detached: true\n    });\n  };\n}\n\nfunction createNuxtPersistedState(useCookie, factoryOptions) {\n  return createPersistedState({\n    storage: {\n      getItem: key => {\n        return useCookie(key, {\n          encode: encodeURIComponent,\n          decode: decodeURIComponent,\n          ...(factoryOptions == null ? void 0 : factoryOptions.cookieOptions)\n        }).value;\n      },\n      setItem: (key, value) => {\n        useCookie(key, {\n          encode: encodeURIComponent,\n          decode: decodeURIComponent,\n          ...(factoryOptions == null ? void 0 : factoryOptions.cookieOptions)\n        }).value = value;\n      }\n    },\n    ...factoryOptions\n  });\n}\n\nvar persistedState = createPersistedState();\nexport { createNuxtPersistedState, createPersistedState, persistedState as default };","map":{"version":3,"names":["isObject","v","normalizeOptions","options","globalOptions","Object","create","Proxy","get","target","key","receiver","Reflect","state","path","reduce","obj","p","set","val","slice","test","length","pick","baseState","paths","substate","pathArray","split","createPersistedState","factoryOptions","context","persist","store","storage","localStorage","beforeRestore","afterRestore","serializer","serialize","JSON","stringify","deserialize","parse","$id","fromStorage","getItem","$patch","_error","$subscribe","_mutation","toStore","Array","isArray","setItem","detached","createNuxtPersistedState","useCookie","encode","encodeURIComponent","decode","decodeURIComponent","cookieOptions","value","persistedState","default"],"sources":["/Users/lord/Documents/Programmer/vue/VueProjects/blog-vue/blog-web/node_modules/pinia-plugin-persistedstate/dist/index.mjs"],"sourcesContent":["// src/normalize.ts\nfunction isObject(v) {\n  return typeof v === \"object\" && v !== null;\n}\nfunction normalizeOptions(options, globalOptions) {\n  options = isObject(options) ? options : /* @__PURE__ */ Object.create(null);\n  return new Proxy(options, {\n    get(target, key, receiver) {\n      return Reflect.get(target, key, receiver) || Reflect.get(globalOptions, key, receiver);\n    }\n  });\n}\n\n// src/pick.ts\nfunction get(state, path) {\n  return path.reduce((obj, p) => {\n    return obj == null ? void 0 : obj[p];\n  }, state);\n}\nfunction set(state, path, val) {\n  return path.slice(0, -1).reduce((obj, p) => {\n    if (!/^(__proto__)$/.test(p))\n      return obj[p] = obj[p] || {};\n    else\n      return {};\n  }, state)[path[path.length - 1]] = val, state;\n}\nfunction pick(baseState, paths) {\n  return paths.reduce((substate, path) => {\n    const pathArray = path.split(\".\");\n    return set(substate, pathArray, get(baseState, pathArray));\n  }, {});\n}\n\n// src/plugin.ts\nfunction createPersistedState(factoryOptions = {}) {\n  return function(context) {\n    const {\n      options: { persist },\n      store\n    } = context;\n    if (!persist)\n      return;\n    const {\n      storage = localStorage,\n      beforeRestore = null,\n      afterRestore = null,\n      serializer = {\n        serialize: JSON.stringify,\n        deserialize: JSON.parse\n      },\n      key = store.$id,\n      paths = null\n    } = normalizeOptions(persist, factoryOptions);\n    beforeRestore == null ? void 0 : beforeRestore(context);\n    try {\n      const fromStorage = storage.getItem(key);\n      if (fromStorage)\n        store.$patch(serializer.deserialize(fromStorage));\n    } catch (_error) {\n    }\n    afterRestore == null ? void 0 : afterRestore(context);\n    store.$subscribe((_mutation, state) => {\n      try {\n        const toStore = Array.isArray(paths) ? pick(state, paths) : state;\n        storage.setItem(key, serializer.serialize(toStore));\n      } catch (_error) {\n      }\n    }, { detached: true });\n  };\n}\nfunction createNuxtPersistedState(useCookie, factoryOptions) {\n  return createPersistedState({\n    storage: {\n      getItem: (key) => {\n        return useCookie(key, {\n          encode: encodeURIComponent,\n          decode: decodeURIComponent,\n          ...factoryOptions == null ? void 0 : factoryOptions.cookieOptions\n        }).value;\n      },\n      setItem: (key, value) => {\n        useCookie(key, {\n          encode: encodeURIComponent,\n          decode: decodeURIComponent,\n          ...factoryOptions == null ? void 0 : factoryOptions.cookieOptions\n        }).value = value;\n      }\n    },\n    ...factoryOptions\n  });\n}\nvar persistedState = createPersistedState();\nexport {\n  createNuxtPersistedState,\n  createPersistedState,\n  persistedState as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}