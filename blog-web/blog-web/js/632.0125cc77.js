"use strict";(self["webpackChunkblog_web"]=self["webpackChunkblog_web"]||[]).push([[632],{53632:function(e,t,n){n.d(t,{s:function(){return ye}});var a=n(73396);const o={class:"bg-ob-deep-800 p-4 mt-8 lg:px-14 lg:py-10 rounded-2xl shadow-xl mb-8 lg:mb-0",id:"comments"};function l(e,t,n,l,r,s){const c=(0,a.up)("SubTitle"),m=(0,a.up)("CommentForm"),i=(0,a.up)("CommentList");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(c,{title:"titles.comment"},null,8,["title"]),(0,a.Wm)(m),(0,a.Wm)(i)])}var r=n(50913),s=n(49242);const c=e=>((0,a.dD)("data-v-d20e72fa"),e=e(),(0,a.Cn)(),e),m={class:"flex space-x-3 xl:space-x-5"},i={class:"comment flex flex-col flex-wrap-reverse w-full max-w-full-calc"},p={class:"justify-between",style:{"text-align":"right"}},d=c((()=>(0,a._)("span",{class:"text-center flex-grow commit"},"Add Comment",-1))),u=[d],w=c((()=>(0,a._)("div",{class:"w-full border-b-2 mt-6 wire"},null,-1)));function y(e,t,n,o,l,r){const c=(0,a.up)("Avatar");return(0,a.wg)(),(0,a.iD)("div",m,[(0,a.Wm)(c,{url:e.avatar},null,8,["url"]),(0,a._)("div",i,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.commentContent=t),class:"w-full shadow-md rounded-md p-4 focus:outline-none input",placeholder:"Add comment...",cols:"30",rows:"5"},null,512),[[s.nr,e.commentContent]]),(0,a._)("div",p,[(0,a._)("button",{onClick:t[1]||(t[1]=(...t)=>e.saveComment&&e.saveComment(...t)),id:"submit-button",class:"mt-5 w-32 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 flex float-right"},u)]),w])])}var f=n(44870),g=n(37440),v=n(83560),h=n(22483),C=n(17437),x=n(57619),b=n(73286),_=n(13184),k=(0,a.aZ)({name:"CommentItem",components:{SubTitle:r.D,Avatar:g.Z},setup(){const e=(0,a.FN)()?.appContext.config.globalProperties,t=(0,v.L)(),n=(0,C.j)(),o=(0,x.q)(),l=(0,h.yj)(),r=(0,f.qj)({commentContent:""}),s=()=>{if(""===t.userInfo)return void e.$notify({title:"Warning",message:"请登录后评论",type:"warning"});if(""==r.commentContent.trim())return void e.$notify({title:"Warning",message:"评论不能为空",type:"warning"});const a=l.path,s=a.split("/"),m={commentContent:r.commentContent,type:n.type};m.topicId=s[2],b.Z.saveComment(m).then((({data:t})=>{if(0===t.code){c();let t=o.websiteConfig.isCommentReview;t?e.$notify({title:"Warning",message:"评论成功,正在审核中",type:"warning"}):e.$notify({title:"Success",message:"评论成功",type:"success"}),r.commentContent=""}}))},c=()=>{switch(n.type){case 1:_.Z.emit("articleFetchComment");break;case 2:_.Z.emit("messageFetchComment");break;case 3:_.Z.emit("aboutFetchComment");break;case 4:_.Z.emit("friendLinkFetchComment");break;case 5:_.Z.emit("talkFetchComment")}};return{...(0,f.BK)(r),avatar:(0,a.Fl)((()=>t.userInfo.avatar)),saveComment:s}}}),Z=n(40089);const I=(0,Z.Z)(k,[["render",y],["__scopeId","data-v-d20e72fa"]]);var R=I;const F={key:0,class:"load-more-button mt-7 w-32 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 flex mx-auto"};function D(e,t,n,o,l,r){const c=(0,a.up)("CommentItem");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(s.W3,{name:"fade"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.comments,((e,t)=>((0,a.wg)(),(0,a.j4)(c,{key:e.id,comment:e,index:t},null,8,["comment","index"])))),128))])),_:1}),e.haveMore?((0,a.wg)(),(0,a.iD)("button",F,[(0,a._)("span",{class:"text-center flex-grow",onClick:t[0]||(t[0]=(...t)=>e.loadMore&&e.loadMore(...t))},"Load More")])):(0,a.kq)("",!0)],64)}var W=n(87139);const M={class:"mt-5 max-w-full"},S={class:"flex space-x-3 xl:space-x-5"},L={class:"max-w-full-calc space-y-5"},j={class:"bg-white text-primary p-4 rounded-md relative shadow-md reply",style:{width:"fit-content"}},A=["innerHTML"],U={class:"flex justify-between mt-3 text-xs text-gray-400 space-x-3 md:space-x-16"};function T(e,t,n,o,l,r){const c=(0,a.up)("Avatar"),m=(0,a.up)("CommentReplyForm"),i=(0,a.up)("CommentReplyItem");return(0,a.wg)(),(0,a.iD)("div",M,[(0,a._)("div",S,[(0,a.Wm)(c,{url:e.comment.avatar},null,8,["url"]),(0,a._)("div",L,[(0,a._)("div",j,[(0,a._)("p",{class:"commentContent",innerHTML:e.comment.commentContent.replaceAll("\n","<br>")},null,8,A),(0,a._)("div",U,[(0,a._)("span",null,(0,W.zw)(e.comment.nickname)+" | "+(0,W.zw)(e.time),1),(0,a._)("div",null,[(0,a._)("span",{onClick:t[0]||(t[0]=(...t)=>e.clickOnReply&&e.clickOnReply(...t)),class:"cursor-pointer reply-button"},"Reply")])])]),(0,a.wy)((0,a.Wm)(m,{replyUserId:e.comment.userId,initialContent:e.replyContent,onChangeShow:e.changeShow},null,8,["replyUserId","initialContent","onChangeShow"]),[[s.F8,e.show]]),(0,a.Wm)(s.W3,{name:"fade"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.comment.replyDTOs,(t=>((0,a.wg)(),(0,a.j4)(i,{key:t.id,reply:t,commentUserId:e.comment.userId},null,8,["reply","commentUserId"])))),128))])),_:1})])])])}const $=e=>((0,a.dD)("data-v-b2a0afe8"),e=e(),(0,a.Cn)(),e),q={class:"flex space-x-3 xl:space-x-5"},H={class:"reply bg-white flex flex-col p-3 rounded-md relative shadow-md"},K=["innerHTML"],O={class:"flex justify-between mt-2 text-xs text-gray-400 space-x-3 md:space-x-16"},B=$((()=>(0,a._)("a",{href:"",target:"_blank"},null,-1)));function Y(e,t,n,o,l,r){const c=(0,a.up)("Avatar"),m=(0,a.up)("CommentReplyForm");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",q,[(0,a.Wm)(c,{url:e.reply.avatar},null,8,["url"]),(0,a._)("div",H,[(0,a._)("p",{class:"commentContent",innerHTML:e.commentContent.replaceAll("\n","<br>")},null,8,K),(0,a._)("div",O,[(0,a._)("span",null,(0,W.zw)(e.reply.nickname)+" | "+(0,W.zw)(e.time),1),(0,a._)("div",null,[(0,a._)("span",{onClick:t[0]||(t[0]=(...t)=>e.clickOnSonReply&&e.clickOnSonReply(...t)),class:"cursor-pointer reply-button"},"Reply")])])])]),B,(0,a.wy)((0,a.Wm)(m,{class:"mt-5",replyUserId:e.reply.userId,initialContent:e.replyContent,onChangeShow:e.changeShow},null,8,["replyUserId","initialContent","onChangeShow"]),[[s.F8,e.show]])])}const z=e=>((0,a.dD)("data-v-4e954568"),e=e(),(0,a.Cn)(),e),J={class:"flex space-x-3 xl:space-x-5"},N={class:"reply flex flex-col flex-wrap-reverse w-full max-w-full-calc",style:{width:"fit-content"}},P=["placeholder"],V={class:"justify-between",style:{"text-align":"right"}},E=z((()=>(0,a._)("span",{class:"text-center flex-grow commit"},"Reply",-1))),G=[E],Q=z((()=>(0,a._)("span",{class:"text-center flex-grow commit"},"Cancel",-1))),X=[Q];function ee(e,t,n,o,l,r){const c=(0,a.up)("Avatar");return(0,a.wg)(),(0,a.iD)("div",J,[(0,a.Wm)(c,{url:e.avatar},null,8,["url"]),(0,a._)("div",N,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.commentContent=t),class:"w-full shadow-md rounded-md p-4 focus:outline-none input",placeholder:e.initialContent,cols:"30",rows:"5"},null,8,P),[[s.nr,e.commentContent]]),(0,a._)("div",V,[(0,a._)("button",{onClick:t[1]||(t[1]=(...t)=>e.saveReply&&e.saveReply(...t)),id:"submit-button",class:"mt-5 w-16 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 flex float-right"},G),(0,a._)("button",{onClick:t[2]||(t[2]=(...t)=>e.CancelReply&&e.CancelReply(...t)),id:"submit-button",class:"mt-5 mr-3 w-16 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 flex float-right"},X)])])])}var te=(0,a.aZ)({components:{Avatar:g.Z},props:["replyUserId","initialContent"],setup(e,{emit:t}){const n=(0,a.FN)()?.appContext.config.globalProperties,o=(0,v.L)(),l=(0,C.j)(),r=(0,x.q)(),s=(0,h.yj)(),c=(0,f.qj)({commentContent:""}),m=(0,a.f3)("parentId"),i=(0,a.f3)("index"),p=()=>{if(""===o.userInfo)return void n.$notify({title:"Warning",message:"请登录后回复",type:"warning"});if(""==c.commentContent.trim())return void n.$notify({title:"Warning",message:"回复不能为空",type:"warning"});const a=s.path,i=a.split("/"),p={type:l.type,replyUserId:e.replyUserId,parentId:m,commentContent:c.commentContent};p.topicId=i[2],b.Z.saveComment(p).then((({data:e})=>{if(0===e.code){t("changeShow"),d();let e=r.websiteConfig.isCommentReview;e?n.$notify({title:"Warning",message:"评论成功,正在审核中",type:"warning"}):n.$notify({title:"Success",message:"回复成功",type:"success"}),c.commentContent=""}}))},d=async()=>{switch(l.type){case 1:_.Z.emit("articleFetchReplies",i);break;case 2:_.Z.emit("messageFetchReplies",i);break;case 3:_.Z.emit("aboutFetchReplies",i);break;case 4:_.Z.emit("friendLinkFetchReplies",i);break;case 5:_.Z.emit("talkFetchReplies",i)}},u=()=>{t("changeShow")};return{...(0,f.BK)(c),avatar:(0,a.Fl)((()=>o.userInfo.avatar)),saveReply:p,CancelReply:u}}});const ne=(0,Z.Z)(te,[["render",ee],["__scopeId","data-v-4e954568"]]);var ae=ne,oe=(0,a.aZ)({components:{Avatar:g.Z,CommentReplyForm:ae},props:["reply","commentUserId"],setup(e){const t=e=>{let t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();return n+"-"+a+"-"+o},n=(0,f.qj)({replyContent:"",time:t(e.reply.createTime),show:!1}),o=()=>{n.replyContent="@"+e.reply.nickname,n.show=!0},l=()=>{n.show=!1},r=(0,a.Fl)((()=>e.reply.replyUserId!==e.commentUserId?`<a href="${e.reply.replyWebsite}" target="_blank" class="reply-link">@${e.reply.replyNickname}&nbsp</a>`+e.reply.commentContent:e.reply.commentContent));return{...(0,f.BK)(n),commentContent:r,clickOnSonReply:o,changeShow:l}}});const le=(0,Z.Z)(oe,[["render",Y],["__scopeId","data-v-b2a0afe8"]]);var re=le,se=(0,a.aZ)({components:{Avatar:g.Z,CommentReplyItem:re,CommentReplyForm:ae},props:["comment","index"],setup(e){const t=e.comment;(0,a.JJ)("parentId",t.id),(0,a.JJ)("index",e.index);const n=e=>{let t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();return n+"-"+a+"-"+o},o=(0,f.qj)({replyContent:"",time:n(e.comment.createTime),show:!1}),l=()=>{o.show=!1},r=()=>{o.replyContent="add reply...",o.show=!0};return{...(0,f.BK)(o),clickOnReply:r,changeShow:l}}});const ce=(0,Z.Z)(se,[["render",T],["__scopeId","data-v-3c44e4c3"]]);var me=ce,ie=(0,a.aZ)({components:{CommentItem:me},setup(){const e=(0,C.j)(),t=async()=>{switch(e.type){case 1:_.Z.emit("articleLoadMore");break;case 2:_.Z.emit("messageLoadMore");break;case 3:_.Z.emit("aboutLoadMore");break;case 4:_.Z.emit("friendLinkLoadMore");break;case 5:_.Z.emit("talkLoadMore")}};return{comments:(0,a.f3)("comments"),haveMore:(0,a.f3)("haveMore"),loadMore:t}}});const pe=(0,Z.Z)(ie,[["render",D],["__scopeId","data-v-0547f9c6"]]);var de=pe,ue=(0,a.aZ)({name:"Comment",components:{SubTitle:r.D,CommentForm:R,CommentList:de},setup(){return{}}});const we=(0,Z.Z)(ue,[["render",l]]);var ye=we},37440:function(e,t,n){n.d(t,{Z:function(){return w}});var a=n(73396);const o={class:"flex-shrink-0"},l={class:"rounded-full ring-gray-100 overflow-hidden shaodw-lg w-9 xl:w-10"},r=["src"],s=["src"];function c(e,t,n,c,m,i){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",l,[null!=e.url?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"avatar-img",src:e.url,alt:""},null,8,r)):((0,a.wg)(),(0,a.iD)("img",{key:1,class:"avatar-img",src:e.default,alt:""},null,8,s))])])}var m=n(44870),i=n(57619),p=(0,a.aZ)({name:"Avatar",props:["url"],setup(e){const t=(0,i.q)();return{url:(0,m.BK)(e).url,default:(0,a.Fl)((()=>t.websiteConfig.touristAvatar||"https://img.cloudycraft.cn/blog/config/fd190046b952757b012a681edb43ea34.jpg"))}}}),d=n(40089);const u=(0,d.Z)(p,[["render",c],["__scopeId","data-v-7d18bc94"]]);var w=u}}]);