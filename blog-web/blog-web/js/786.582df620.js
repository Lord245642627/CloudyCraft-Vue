"use strict";(self["webpackChunkblog_web"]=self["webpackChunkblog_web"]||[]).push([[786],{1983:function(e,t,a){a.r(t),a.d(t,{default:function(){return pe}});var l=a(73396),i=a(87139),r=a(49242);const c=e=>((0,l.dD)("data-v-2d0c8a2a"),e=e(),(0,l.Cn)(),e),s={class:"flex flex-col"},n={class:"main-grid"},o={class:"post-header"},d={class:"post-labels"},p={key:1},m={key:2},g=c((()=>(0,l._)("em",{class:"opacity-50"},"#",-1))),h={key:2},u=c((()=>(0,l._)("b",{class:"opacity-50"},"#",-1))),w={key:0,class:"post-title text-white"},y={class:"flex flex-row items-center justify-start mt-8 mb-4"},v={key:0,class:"post-footer"},x={class:"text-white opacity-80"},f={class:"opacity-70"},k={key:1,class:"post-footer"},C={class:"flex flex-row items-center"},_={class:"text-ob-dim mt-1"},b={key:2,class:"post-stats"},A={class:"pl-2 opacity-70"},D={class:"pl-2 opacity-70"},T={key:3,class:"post-stats"},W={class:"pl-2"},z={class:"pl-2"},I={class:"main-grid"},M={key:0,class:"post-html"},N=["innerHTML"],Z={key:1,class:"bg-ob-deep-800 px-14 py-16 rounded-2xl shadow-xl block min-h-screen"},S=c((()=>(0,l._)("br",null,null,-1))),j=c((()=>(0,l._)("br",null,null,-1))),R=c((()=>(0,l._)("br",null,null,-1))),H={class:"flex flex-col lg:flex-row justify-start items-end my-8 my-gap"},E={key:0,class:"w-full h-full self-stretch mr-0 lg:mr-4"},F={key:1,class:"w-full h-full self-stretch mt-0"},P={id:"sticky-sidebar"},q={class:"sidebar-box mb-4"},B=c((()=>(0,l._)("div",{id:"toc1"},null,-1)));function J(e,t,a,c,J,L){const Y=(0,l.up)("ob-skeleton"),$=(0,l.up)("svg-icon"),K=(0,l.up)("SubTitle"),O=(0,l.up)("ArticleCard"),Q=(0,l.up)("Comment"),U=(0,l.up)("Profile"),G=(0,l.up)("Navigator"),V=(0,l.up)("Sticky"),X=(0,l.up)("Sidebar"),ee=(0,l.Q2)("lazy");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",n,[(0,l._)("div",o,[(0,l._)("span",d,[e.loading?((0,l.wg)(),(0,l.j4)(Y,{key:0,tag:"b",height:"20px",width:"35px"})):!e.loading&&e.article.categoryName?((0,l.wg)(),(0,l.iD)("b",p,[(0,l._)("span",null,(0,i.zw)(e.article.categoryName),1)])):((0,l.wg)(),(0,l.iD)("b",m,(0,i.zw)(e.t("settings.default-category")),1)),(0,l._)("ul",null,[e.loading?((0,l.wg)(),(0,l.j4)(Y,{key:0,count:2,tag:"li",height:"16px",width:"35px",class:"mr-2"})):!e.loading&&e.article.tags&&e.article.tags.length>0?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:1},(0,l.Ko)(e.article.tags,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[g,(0,l.Uk)(" "+(0,i.zw)(e.tagName),1)])))),128)):((0,l.wg)(),(0,l.iD)("li",h,[u,(0,l.Uk)(" "+(0,i.zw)(e.t("settings.default-tag")),1)]))])]),e.article.articleTitle?((0,l.wg)(),(0,l.iD)("h1",w,(0,i.zw)(e.article.articleTitle),1)):((0,l.wg)(),(0,l.j4)(Y,{key:1,class:"post-title text-white uppercase",width:"100%",height:"clamp(1.2rem, calc(1rem + 3.5vw), 4rem)"})),(0,l._)("div",y,[e.article.author?((0,l.wg)(),(0,l.iD)("div",v,[(0,l.wy)((0,l._)("img",{class:"hover:opacity-50 cursor-pointer",alt:"author avatar",onClick:t[0]||(t[0]=t=>e.handleAuthorClick(e.article.author.website))},null,512),[[ee,e.article.author.avatar||""]]),(0,l._)("span",x,[(0,l._)("strong",{class:"text-white pr-1.5 hover:opacity-50 cursor-pointer",onClick:t[1]||(t[1]=t=>e.handleAuthorClick(e.article.author.website))},(0,i.zw)(e.article.author.nickname),1),(0,l._)("span",f,(0,i.zw)(e.t("settings.shared-on"))+" "+(0,i.zw)(e.t(`settings.months[${new Date(e.article.createTime).getMonth()}]`))+" "+(0,i.zw)(new Date(e.article.createTime).getDate())+", "+(0,i.zw)(new Date(e.article.createTime).getFullYear()),1)])])):((0,l.wg)(),(0,l.iD)("div",k,[(0,l._)("div",C,[(0,l.Wm)(Y,{class:"mr-2",height:"28px",width:"28px",circle:!0}),(0,l._)("span",_,[(0,l.Wm)(Y,{height:"20px",width:"150px"})])])])),""!==e.wordNum&&""!==e.readTime?((0,l.wg)(),(0,l.iD)("div",b,[(0,l._)("span",null,[(0,l.Wm)($,{"icon-class":"text-outline",style:{stroke:"white"}}),(0,l._)("span",A,(0,i.zw)(e.wordNum),1)]),(0,l._)("span",null,[(0,l.Wm)($,{"icon-class":"clock-outline",style:{stroke:"white"}}),(0,l._)("span",D,(0,i.zw)(e.readTime),1)])])):((0,l.wg)(),(0,l.iD)("div",T,[(0,l._)("span",null,[(0,l.Wm)($,{"icon-class":"clock"}),(0,l._)("span",W,[(0,l.Wm)(Y,{width:"40px",height:"16px"})])]),(0,l._)("span",null,[(0,l.Wm)($,{"icon-class":"text"}),(0,l._)("span",z,[(0,l.Wm)(Y,{width:"40px",height:"16px"})])])]))])])]),(0,l._)("div",I,[(0,l._)("div",null,[e.article.articleContent?((0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("div",{class:"markdown-body",ref:"articleRef",innerHTML:e.article.articleContent},null,8,N)])):((0,l.wg)(),(0,l.iD)("div",Z,[(0,l.Wm)(Y,{tag:"div",count:1,height:"36px",width:"150px",class:"mb-6"}),S,(0,l.Wm)(Y,{tag:"div",count:35,height:"16px",width:"100px",class:"mr-2"}),j,R,(0,l.Wm)(Y,{tag:"div",count:25,height:"16px",width:"100px",class:"mr-2"})])),(0,l._)("div",H,[e.preArticleCard?((0,l.wg)(),(0,l.iD)("div",E,[(0,l.Wm)(K,{title:"settings.paginator.pre",icon:"arrow-left-circle"}),(0,l.Wm)(O,{class:"pre-and-next-article",data:e.preArticleCard},null,8,["data"])])):(0,l.kq)("",!0),e.nextArticleCard?((0,l.wg)(),(0,l.iD)("div",F,[(0,l.Wm)(K,{title:"settings.paginator.next",side:e.isMobile?"left":"right",icon:"arrow-right-circle"},null,8,["side"]),(0,l.Wm)(O,{class:"pre-and-next-article",data:e.nextArticleCard},null,8,["data"])])):(0,l.kq)("",!0)]),(0,l.Wm)(Q)]),(0,l._)("div",null,[(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Wm)(U),(0,l.Wm)(V,{stickyTop:32,endingElId:"footer",dynamicElClass:"#sticky-sidebar"},{default:(0,l.w5)((()=>[(0,l._)("div",P,[(0,l.Wm)(r.uT,{name:"fade-slide-y",mode:"out-in"},{default:(0,l.w5)((()=>[(0,l._)("div",q,[(0,l.Wm)(K,{title:"titles.toc",icon:"toc"},null,8,["title"]),B])])),_:1}),(0,l.Wm)(G)])])),_:1})])),_:1})])])])}var L=a(99250),Y=a(44870),$=a(22483),K=a(35213),O=a(53632),Q=a(50913),U=a(47264),G=a(45466),V=a(17437),X=a(62069),ee=a(2549),te=a.n(ee),ae=(a(79525),a(33731),a(77372),a(61678),a(3275),a(28781),a(51973),a(61739),a(70714),a(8072),a(9688),a(64121),a(80077),a(23456),a(43774)),le=a.n(ae),ie=a(13184),re=a(36883),ce=a(73286),se=a(69622),ne=(0,l.aZ)({name:"Article",components:{Sidebar:L.YE,Comment:O.s,SubTitle:Q.D,ArticleCard:U.T,Profile:L.NZ,Sticky:X.Z,Navigator:L.C3},setup(){const e=(0,l.FN)()?.appContext.config.globalProperties,t=(0,G.E)(),a=(0,V.j)(),i=(0,$.yj)(),r=(0,$.tv)(),{t:c}=(0,K.QT)(),s=(0,Y.iH)(!0),n=(0,Y.iH)(),o=(0,Y.qj)({articleId:"",article:"",wordNum:"",readTime:"",comments:[],images:[],preArticleCard:"",nextArticleCard:"",haveMore:!1,isReload:!1}),d=(0,Y.qj)({current:1,size:7});a.type=1,(0,l.bv)((()=>{o.articleId=i.params.articleId,y(),g(),h()})),(0,l.Ah)((()=>{t.resetHeaderImage(),o.article="",le().destroy()})),(0,$.ao)((e=>{o.article="",o.readTime="",o.wordNum="",o.comments=[],o.images=[],o.preArticleCard="",o.nextArticleCard="",o.articleId=e.params.articleId,d.current=1,o.isReload=!0,y(),g(),h()})),(0,l.JJ)("comments",(0,l.Fl)((()=>o.comments))),(0,l.JJ)("haveMore",(0,l.Fl)((()=>o.haveMore))),ie.Z.on("articleFetchComment",(()=>{d.current=1,o.isReload=!0,h()})),ie.Z.on("articleFetchReplies",(e=>{u(e)})),ie.Z.on("articleLoadMore",(()=>{h()}));const p=e=>{(0,re.e)({images:o.images,index:o.images.indexOf(e)})},m=()=>{let e=n.value.children;if(e.length)for(let l=0;l<e.length;l++){let t=e[l],a=/^H[1-4]{1}$/;a.exec(t.tagName)&&(t.id=l)}le().init({tocSelector:"#toc1",contentSelector:".post-html",headingSelector:"h1, h2, h3",collapseDepth:3,disableTocScrollSync:!0,onClick:function(e){e.preventDefault()}});const t=n.value.getElementsByTagName("img");for(var a=0;a<t.length;a++)o.images.push(t[a].src),t[a].addEventListener("click",(function(e){p(e.target.currentSrc)}))},g=()=>{s.value=!0,ce.Z.getArticeById(o.articleId).then((({data:a})=>{if(52003===a.code)return e.$notify({title:"Error",message:"文章密码认证未通过",type:"error"}),void r.push({path:"/出错啦"});null!==a.data?(t.setHeaderImage(a.data.articleCover),new Promise((e=>{a.data.articleContent=(0,se.Z)(a.data.articleContent),e(a.data)})).then((e=>{o.article=e,o.wordNum=Math.round(v(e.articleContent).length/100)/10+"k",o.readTime=Math.round(v(e.articleContent).length/400)+"mins",s.value=!1,(0,l.Y3)((()=>{te().highlightAll(),m()}))})),new Promise((e=>{a.data.preArticleCard.articleContent=(0,se.Z)(a.data.preArticleCard.articleContent).replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,""),e(a.data.preArticleCard)})).then((e=>{o.preArticleCard=e})),new Promise((e=>{a.data.nextArticleCard.articleContent=(0,se.Z)(a.data.nextArticleCard.articleContent).replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,""),e(a.data.nextArticleCard)})).then((e=>{o.nextArticleCard=e}))):r.push({path:"/出错啦"})}))},h=()=>{const e={type:1,topicId:o.articleId,current:d.current,size:d.size};ce.Z.getComments(e).then((({data:e})=>{o.isReload?(o.comments=e.data.records,o.isReload=!1):o.comments.push(...e.data.records),e.data.total<=o.comments.length?o.haveMore=!1:o.haveMore=!0,d.current++}))},u=e=>{ce.Z.getRepliesByCommentId(o.comments[e].id).then((({data:t})=>{o.comments[e].replyDTOs=t.data}))},w=e=>{""===e&&(e=window.location.href),window.location.href=e},y=()=>{window.scrollTo({top:0})},v=e=>e.replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,"");return{articleRef:n,...(0,Y.BK)(o),isMobile:(0,l.Fl)((()=>t.isMobile)),handleAuthorClick:w,loading:s,t:c}}}),oe=a(40089);const de=(0,oe.Z)(ne,[["render",J],["__scopeId","data-v-2d0c8a2a"]]);var pe=de}}]);