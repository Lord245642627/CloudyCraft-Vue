{"ast":null,"code":"import * as imageConversion from 'image-conversion';\nexport default {\n  created() {\n    this.getWebsiteConfig();\n  },\n\n  data: function () {\n    return {\n      websiteConfigForm: {},\n      activeName: 'info',\n      headers: {\n        Authorization: 'Bearer ' + sessionStorage.getItem('token')\n      }\n    };\n  },\n  methods: {\n    getWebsiteConfig() {\n      this.axios.get('/api/admin/website/config').then(({\n        data\n      }) => {\n        this.websiteConfigForm = data.data;\n      });\n    },\n\n    handleAuthorAvatarSuccess(response) {\n      this.websiteConfigForm.authorAvatar = response.data;\n    },\n\n    handleFaviconSuccess(response) {\n      this.websiteConfigForm.favicon = response.data;\n    },\n\n    handleLogoSuccess(response) {\n      this.websiteConfigForm.logo = response.data;\n    },\n\n    handleUserAvatarSuccess(response) {\n      this.websiteConfigForm.userAvatar = response.data;\n    },\n\n    handleTouristAvatarSuccess(response) {\n      this.websiteConfigForm.touristAvatar = response.data;\n    },\n\n    handleWeiXinSuccess(response) {\n      this.websiteConfigForm.weiXinQRCode = response.data;\n    },\n\n    handleAlipaySuccess(response) {\n      this.websiteConfigForm.alipayQRCode = response.data;\n    },\n\n    beforeUpload(file) {\n      return new Promise(resolve => {\n        if (file.size / 1024 < this.config.UPLOAD_SIZE) {\n          resolve(file);\n        }\n\n        imageConversion.compressAccurately(file, this.config.UPLOAD_SIZE).then(res => {\n          resolve(res);\n        });\n      });\n    },\n\n    updateWebsiteConfig() {\n      this.axios.put('/api/admin/website/config', this.websiteConfigForm).then(({\n        data\n      }) => {\n        if (data.code === 0) {\n          this.$notify.success({\n            title: '成功',\n            message: data.message\n          });\n        } else {\n          this.$notify.error({\n            title: '失败',\n            message: data.message\n          });\n        }\n      });\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}