{"ast":null,"code":"import * as _ from 'lodash-es';\nimport { greedyFAS } from './greedy-fas.js';\nexport { run, undo };\n\nfunction run(g) {\n  var fas = g.graph().acyclicer === 'greedy' ? greedyFAS(g, weightFn(g)) : dfsFAS(g);\n\n  _.forEach(fas, function (e) {\n    var label = g.edge(e);\n    g.removeEdge(e);\n    label.forwardName = e.name;\n    label.reversed = true;\n    g.setEdge(e.w, e.v, label, _.uniqueId('rev'));\n  });\n\n  function weightFn(g) {\n    return function (e) {\n      return g.edge(e).weight;\n    };\n  }\n}\n\nfunction dfsFAS(g) {\n  var fas = [];\n  var stack = {};\n  var visited = {};\n\n  function dfs(v) {\n    if (_.has(visited, v)) {\n      return;\n    }\n\n    visited[v] = true;\n    stack[v] = true;\n\n    _.forEach(g.outEdges(v), function (e) {\n      if (_.has(stack, e.w)) {\n        fas.push(e);\n      } else {\n        dfs(e.w);\n      }\n    });\n\n    delete stack[v];\n  }\n\n  _.forEach(g.nodes(), dfs);\n\n  return fas;\n}\n\nfunction undo(g) {\n  _.forEach(g.edges(), function (e) {\n    var label = g.edge(e);\n\n    if (label.reversed) {\n      g.removeEdge(e);\n      var forwardName = label.forwardName;\n      delete label.reversed;\n      delete label.forwardName;\n      g.setEdge(e.w, e.v, label, forwardName);\n    }\n  });\n}","map":{"version":3,"names":["_","greedyFAS","run","undo","g","fas","graph","acyclicer","weightFn","dfsFAS","forEach","e","label","edge","removeEdge","forwardName","name","reversed","setEdge","w","v","uniqueId","weight","stack","visited","dfs","has","outEdges","push","nodes","edges"],"sources":["/Users/lord/Documents/Programmer/vue/VueProjects/blog-vue/blog-admin/node_modules/dagre-d3-es/src/dagre/acyclic.js"],"sourcesContent":["import * as _ from 'lodash-es';\nimport { greedyFAS } from './greedy-fas.js';\n\nexport { run, undo };\n\nfunction run(g) {\n  var fas = g.graph().acyclicer === 'greedy' ? greedyFAS(g, weightFn(g)) : dfsFAS(g);\n  _.forEach(fas, function (e) {\n    var label = g.edge(e);\n    g.removeEdge(e);\n    label.forwardName = e.name;\n    label.reversed = true;\n    g.setEdge(e.w, e.v, label, _.uniqueId('rev'));\n  });\n\n  function weightFn(g) {\n    return function (e) {\n      return g.edge(e).weight;\n    };\n  }\n}\n\nfunction dfsFAS(g) {\n  var fas = [];\n  var stack = {};\n  var visited = {};\n\n  function dfs(v) {\n    if (_.has(visited, v)) {\n      return;\n    }\n    visited[v] = true;\n    stack[v] = true;\n    _.forEach(g.outEdges(v), function (e) {\n      if (_.has(stack, e.w)) {\n        fas.push(e);\n      } else {\n        dfs(e.w);\n      }\n    });\n    delete stack[v];\n  }\n\n  _.forEach(g.nodes(), dfs);\n  return fas;\n}\n\nfunction undo(g) {\n  _.forEach(g.edges(), function (e) {\n    var label = g.edge(e);\n    if (label.reversed) {\n      g.removeEdge(e);\n\n      var forwardName = label.forwardName;\n      delete label.reversed;\n      delete label.forwardName;\n      g.setEdge(e.w, e.v, label, forwardName);\n    }\n  });\n}\n"],"mappings":"AAAA,OAAO,KAAKA,CAAZ,MAAmB,WAAnB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AAEA,SAASC,GAAT,EAAcC,IAAd;;AAEA,SAASD,GAAT,CAAaE,CAAb,EAAgB;EACd,IAAIC,GAAG,GAAGD,CAAC,CAACE,KAAF,GAAUC,SAAV,KAAwB,QAAxB,GAAmCN,SAAS,CAACG,CAAD,EAAII,QAAQ,CAACJ,CAAD,CAAZ,CAA5C,GAA+DK,MAAM,CAACL,CAAD,CAA/E;;EACAJ,CAAC,CAACU,OAAF,CAAUL,GAAV,EAAe,UAAUM,CAAV,EAAa;IAC1B,IAAIC,KAAK,GAAGR,CAAC,CAACS,IAAF,CAAOF,CAAP,CAAZ;IACAP,CAAC,CAACU,UAAF,CAAaH,CAAb;IACAC,KAAK,CAACG,WAAN,GAAoBJ,CAAC,CAACK,IAAtB;IACAJ,KAAK,CAACK,QAAN,GAAiB,IAAjB;IACAb,CAAC,CAACc,OAAF,CAAUP,CAAC,CAACQ,CAAZ,EAAeR,CAAC,CAACS,CAAjB,EAAoBR,KAApB,EAA2BZ,CAAC,CAACqB,QAAF,CAAW,KAAX,CAA3B;EACD,CAND;;EAQA,SAASb,QAAT,CAAkBJ,CAAlB,EAAqB;IACnB,OAAO,UAAUO,CAAV,EAAa;MAClB,OAAOP,CAAC,CAACS,IAAF,CAAOF,CAAP,EAAUW,MAAjB;IACD,CAFD;EAGD;AACF;;AAED,SAASb,MAAT,CAAgBL,CAAhB,EAAmB;EACjB,IAAIC,GAAG,GAAG,EAAV;EACA,IAAIkB,KAAK,GAAG,EAAZ;EACA,IAAIC,OAAO,GAAG,EAAd;;EAEA,SAASC,GAAT,CAAaL,CAAb,EAAgB;IACd,IAAIpB,CAAC,CAAC0B,GAAF,CAAMF,OAAN,EAAeJ,CAAf,CAAJ,EAAuB;MACrB;IACD;;IACDI,OAAO,CAACJ,CAAD,CAAP,GAAa,IAAb;IACAG,KAAK,CAACH,CAAD,CAAL,GAAW,IAAX;;IACApB,CAAC,CAACU,OAAF,CAAUN,CAAC,CAACuB,QAAF,CAAWP,CAAX,CAAV,EAAyB,UAAUT,CAAV,EAAa;MACpC,IAAIX,CAAC,CAAC0B,GAAF,CAAMH,KAAN,EAAaZ,CAAC,CAACQ,CAAf,CAAJ,EAAuB;QACrBd,GAAG,CAACuB,IAAJ,CAASjB,CAAT;MACD,CAFD,MAEO;QACLc,GAAG,CAACd,CAAC,CAACQ,CAAH,CAAH;MACD;IACF,CAND;;IAOA,OAAOI,KAAK,CAACH,CAAD,CAAZ;EACD;;EAEDpB,CAAC,CAACU,OAAF,CAAUN,CAAC,CAACyB,KAAF,EAAV,EAAqBJ,GAArB;;EACA,OAAOpB,GAAP;AACD;;AAED,SAASF,IAAT,CAAcC,CAAd,EAAiB;EACfJ,CAAC,CAACU,OAAF,CAAUN,CAAC,CAAC0B,KAAF,EAAV,EAAqB,UAAUnB,CAAV,EAAa;IAChC,IAAIC,KAAK,GAAGR,CAAC,CAACS,IAAF,CAAOF,CAAP,CAAZ;;IACA,IAAIC,KAAK,CAACK,QAAV,EAAoB;MAClBb,CAAC,CAACU,UAAF,CAAaH,CAAb;MAEA,IAAII,WAAW,GAAGH,KAAK,CAACG,WAAxB;MACA,OAAOH,KAAK,CAACK,QAAb;MACA,OAAOL,KAAK,CAACG,WAAb;MACAX,CAAC,CAACc,OAAF,CAAUP,CAAC,CAACQ,CAAZ,EAAeR,CAAC,CAACS,CAAjB,EAAoBR,KAApB,EAA2BG,WAA3B;IACD;EACF,CAVD;AAWD"},"metadata":{},"sourceType":"module"}