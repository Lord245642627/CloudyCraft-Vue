{"ast":null,"code":"export default {\n  created() {\n    this.listMenus();\n  },\n\n  data() {\n    return {\n      keywords: '',\n      loading: true,\n      addMenu: false,\n      isCatalog: true,\n      show: true,\n      menus: [],\n      menuForm: {\n        id: null,\n        name: '',\n        icon: '',\n        component: '',\n        path: '',\n        orderNum: 1,\n        parentId: null,\n        isHidden: 0\n      },\n      icons: ['el-icon-myshouye', 'el-icon-myfabiaowenzhang', 'el-icon-myyonghuliebiao', 'el-icon-myxiaoxi', 'el-icon-myliuyan', 'el-icon-myshouye', 'el-icon-myfabiaowenzhang', 'el-icon-myyonghuliebiao', 'el-icon-myxiaoxi', 'el-icon-myliuyan']\n    };\n  },\n\n  methods: {\n    listMenus() {\n      this.axios.get('/api/admin/menus', {\n        params: {\n          keywords: this.keywords\n        }\n      }).then(({\n        data\n      }) => {\n        this.menus = data.data;\n        this.loading = false;\n      });\n    },\n\n    openModel(menu, type) {\n      if (menu) {\n        this.show = false;\n        this.isCatalog = false;\n\n        switch (type) {\n          case 1:\n            this.menuForm = {\n              id: null,\n              name: '',\n              icon: '',\n              component: '',\n              path: '',\n              orderNum: 1,\n              parentId: null,\n              isHidden: 0\n            };\n            this.$refs.menuTitle.innerHTML = '新增菜单';\n            this.menuForm.parentId = JSON.parse(JSON.stringify(menu.id));\n            break;\n\n          case 2:\n            this.$refs.menuTitle.innerHTML = '修改菜单';\n            this.menuForm = JSON.parse(JSON.stringify(menu));\n            break;\n        }\n      } else {\n        this.$refs.menuTitle.innerHTML = '新增菜单';\n        this.show = true;\n        this.menuForm = {\n          id: null,\n          name: '',\n          icon: '',\n          component: 'Layout',\n          path: '',\n          orderNum: 1,\n          parentId: null,\n          isHidden: 0\n        };\n      }\n\n      this.addMenu = true;\n    },\n\n    checkIcon(icon) {\n      this.menuForm.icon = icon;\n    },\n\n    changeDisable(menu) {\n      let params = {\n        id: menu.id,\n        isHidden: menu.isHidden\n      };\n      this.axios.put('/api/admin/menus/isHidden', params).then(({\n        data\n      }) => {\n        if (data.code === 0) {\n          this.$notify.success({\n            title: '成功',\n            message: '修改成功'\n          });\n        } else {\n          this.$notify.error({\n            title: '失败',\n            message: '修改失败'\n          });\n        }\n      });\n    },\n\n    saveOrUpdateMenu() {\n      if (this.menuForm.name.trim() == '') {\n        this.$message.error('菜单名不能为空');\n        return false;\n      }\n\n      if (this.menuForm.icon.trim() == '') {\n        this.$message.error('菜单icon不能为空');\n        return false;\n      }\n\n      if (this.menuForm.component.trim() == '') {\n        this.$message.error('菜单组件路径不能为空');\n        return false;\n      }\n\n      if (this.menuForm.path.trim() == '') {\n        this.$message.error('菜单访问路径不能为空');\n        return false;\n      }\n\n      this.axios.post('/api/admin/menus', this.menuForm).then(({\n        data\n      }) => {\n        if (data.code === 0) {\n          this.$notify.success({\n            title: '成功',\n            message: '操作成功'\n          });\n          this.listMenus();\n        } else {\n          this.$notify.error({\n            title: '失败',\n            message: '操作失败'\n          });\n        }\n\n        this.addMenu = false;\n      });\n    },\n\n    deleteMenu(id) {\n      this.axios.delete('/api/admin/menus/' + id).then(({\n        data\n      }) => {\n        if (data.code === 0) {\n          this.$notify.success({\n            title: '成功',\n            message: '删除成功'\n          });\n          this.listMenus();\n        } else {\n          this.$notify.error({\n            title: '失败',\n            message: data.message\n          });\n        }\n      });\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}