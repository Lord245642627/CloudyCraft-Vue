{"ast":null,"code":"export default {\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n    disable: {\n      type: Boolean,\n      default: true\n    },\n    placeholder: {\n      type: String,\n      default: ''\n    }\n  },\n\n  data() {\n    return {\n      innerText: this.value,\n      isLocked: false,\n      range: null\n    };\n  },\n\n  watch: {\n    value() {\n      if (!this.isLocked) {\n        this.innerText = this.value;\n      }\n    }\n\n  },\n  methods: {\n    clear() {\n      this.$el.innerHTML = '';\n      this.$emit('input', this.$el.innerHTML);\n    },\n\n    onInput() {\n      this.$emit('input', this.$el.innerHTML);\n    },\n\n    onFocus() {\n      this.$emit('focus', this.$el.innerHTML);\n      this.isLocked = true;\n    },\n\n    onBlur() {\n      // 记录光标\n      if (window.getSelection) {\n        var selection = window.getSelection();\n        this.range = selection.getRangeAt(0);\n      }\n\n      this.$emit('blur', this.$el.innerHTML);\n      this.isLocked = false;\n    },\n\n    addText(value) {\n      // 还原光标\n      if (window.getSelection) {\n        var selection = window.getSelection();\n        selection.removeAllRanges(); // 为空初始化光标\n\n        if (this.range == null) {\n          this.$refs.editor.focus();\n          this.range = selection.getRangeAt(0);\n        } // 删除选中内容\n\n\n        this.range.deleteContents(); // 添加内容\n\n        this.range.insertNode(this.range.createContextualFragment(value));\n        this.range.collapse(false);\n        selection.addRange(this.range);\n        this.$emit('input', this.$el.innerHTML);\n      }\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}