{"ast":null,"code":"import { generaMenu } from '@/assets/js/menu';\nexport default {\n  data: function () {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: '用户名不能为空',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '密码不能为空',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    login() {\n      this.$refs.ruleForm.validate(valid => {\n        if (valid) {\n          const that = this;\n          let param = new URLSearchParams();\n          param.append('username', that.loginForm.username);\n          param.append('password', that.loginForm.password);\n          that.axios.post('/api/users/login', param).then(({\n            data\n          }) => {\n            if (data.code === 0) {\n              that.$store.commit('login', data.data);\n              generaMenu();\n              that.$message.success('登录成功');\n              that.$router.push({\n                path: '/'\n              });\n            } else {\n              that.$message.error(data.message);\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}