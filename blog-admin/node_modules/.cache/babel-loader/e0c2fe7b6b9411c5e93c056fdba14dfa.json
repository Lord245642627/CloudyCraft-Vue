{"ast":null,"code":"import * as _ from 'lodash-es';\nimport * as util from '../util.js';\nexport { sort };\n\nfunction sort(entries, biasRight) {\n  var parts = util.partition(entries, function (entry) {\n    return _.has(entry, 'barycenter');\n  });\n\n  var sortable = parts.lhs,\n      unsortable = _.sortBy(parts.rhs, function (entry) {\n    return -entry.i;\n  }),\n      vs = [],\n      sum = 0,\n      weight = 0,\n      vsIndex = 0;\n\n  sortable.sort(compareWithBias(!!biasRight));\n  vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n\n  _.forEach(sortable, function (entry) {\n    vsIndex += entry.vs.length;\n    vs.push(entry.vs);\n    sum += entry.barycenter * entry.weight;\n    weight += entry.weight;\n    vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n  });\n\n  var result = {\n    vs: _.flatten(vs)\n  };\n\n  if (weight) {\n    result.barycenter = sum / weight;\n    result.weight = weight;\n  }\n\n  return result;\n}\n\nfunction consumeUnsortable(vs, unsortable, index) {\n  var last;\n\n  while (unsortable.length && (last = _.last(unsortable)).i <= index) {\n    unsortable.pop();\n    vs.push(last.vs);\n    index++;\n  }\n\n  return index;\n}\n\nfunction compareWithBias(bias) {\n  return function (entryV, entryW) {\n    if (entryV.barycenter < entryW.barycenter) {\n      return -1;\n    } else if (entryV.barycenter > entryW.barycenter) {\n      return 1;\n    }\n\n    return !bias ? entryV.i - entryW.i : entryW.i - entryV.i;\n  };\n}","map":{"version":3,"names":["_","util","sort","entries","biasRight","parts","partition","entry","has","sortable","lhs","unsortable","sortBy","rhs","i","vs","sum","weight","vsIndex","compareWithBias","consumeUnsortable","forEach","length","push","barycenter","result","flatten","index","last","pop","bias","entryV","entryW"],"sources":["/Users/lord/Documents/Programmer/vue/VueProjects/blog-vue/blog-admin/node_modules/dagre-d3-es/src/dagre/order/sort.js"],"sourcesContent":["import * as _ from 'lodash-es';\nimport * as util from '../util.js';\n\nexport { sort };\n\nfunction sort(entries, biasRight) {\n  var parts = util.partition(entries, function (entry) {\n    return _.has(entry, 'barycenter');\n  });\n  var sortable = parts.lhs,\n    unsortable = _.sortBy(parts.rhs, function (entry) {\n      return -entry.i;\n    }),\n    vs = [],\n    sum = 0,\n    weight = 0,\n    vsIndex = 0;\n\n  sortable.sort(compareWithBias(!!biasRight));\n\n  vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n\n  _.forEach(sortable, function (entry) {\n    vsIndex += entry.vs.length;\n    vs.push(entry.vs);\n    sum += entry.barycenter * entry.weight;\n    weight += entry.weight;\n    vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n  });\n\n  var result = { vs: _.flatten(vs) };\n  if (weight) {\n    result.barycenter = sum / weight;\n    result.weight = weight;\n  }\n  return result;\n}\n\nfunction consumeUnsortable(vs, unsortable, index) {\n  var last;\n  while (unsortable.length && (last = _.last(unsortable)).i <= index) {\n    unsortable.pop();\n    vs.push(last.vs);\n    index++;\n  }\n  return index;\n}\n\nfunction compareWithBias(bias) {\n  return function (entryV, entryW) {\n    if (entryV.barycenter < entryW.barycenter) {\n      return -1;\n    } else if (entryV.barycenter > entryW.barycenter) {\n      return 1;\n    }\n\n    return !bias ? entryV.i - entryW.i : entryW.i - entryV.i;\n  };\n}\n"],"mappings":"AAAA,OAAO,KAAKA,CAAZ,MAAmB,WAAnB;AACA,OAAO,KAAKC,IAAZ,MAAsB,YAAtB;AAEA,SAASC,IAAT;;AAEA,SAASA,IAAT,CAAcC,OAAd,EAAuBC,SAAvB,EAAkC;EAChC,IAAIC,KAAK,GAAGJ,IAAI,CAACK,SAAL,CAAeH,OAAf,EAAwB,UAAUI,KAAV,EAAiB;IACnD,OAAOP,CAAC,CAACQ,GAAF,CAAMD,KAAN,EAAa,YAAb,CAAP;EACD,CAFW,CAAZ;;EAGA,IAAIE,QAAQ,GAAGJ,KAAK,CAACK,GAArB;EAAA,IACEC,UAAU,GAAGX,CAAC,CAACY,MAAF,CAASP,KAAK,CAACQ,GAAf,EAAoB,UAAUN,KAAV,EAAiB;IAChD,OAAO,CAACA,KAAK,CAACO,CAAd;EACD,CAFY,CADf;EAAA,IAIEC,EAAE,GAAG,EAJP;EAAA,IAKEC,GAAG,GAAG,CALR;EAAA,IAMEC,MAAM,GAAG,CANX;EAAA,IAOEC,OAAO,GAAG,CAPZ;;EASAT,QAAQ,CAACP,IAAT,CAAciB,eAAe,CAAC,CAAC,CAACf,SAAH,CAA7B;EAEAc,OAAO,GAAGE,iBAAiB,CAACL,EAAD,EAAKJ,UAAL,EAAiBO,OAAjB,CAA3B;;EAEAlB,CAAC,CAACqB,OAAF,CAAUZ,QAAV,EAAoB,UAAUF,KAAV,EAAiB;IACnCW,OAAO,IAAIX,KAAK,CAACQ,EAAN,CAASO,MAApB;IACAP,EAAE,CAACQ,IAAH,CAAQhB,KAAK,CAACQ,EAAd;IACAC,GAAG,IAAIT,KAAK,CAACiB,UAAN,GAAmBjB,KAAK,CAACU,MAAhC;IACAA,MAAM,IAAIV,KAAK,CAACU,MAAhB;IACAC,OAAO,GAAGE,iBAAiB,CAACL,EAAD,EAAKJ,UAAL,EAAiBO,OAAjB,CAA3B;EACD,CAND;;EAQA,IAAIO,MAAM,GAAG;IAAEV,EAAE,EAAEf,CAAC,CAAC0B,OAAF,CAAUX,EAAV;EAAN,CAAb;;EACA,IAAIE,MAAJ,EAAY;IACVQ,MAAM,CAACD,UAAP,GAAoBR,GAAG,GAAGC,MAA1B;IACAQ,MAAM,CAACR,MAAP,GAAgBA,MAAhB;EACD;;EACD,OAAOQ,MAAP;AACD;;AAED,SAASL,iBAAT,CAA2BL,EAA3B,EAA+BJ,UAA/B,EAA2CgB,KAA3C,EAAkD;EAChD,IAAIC,IAAJ;;EACA,OAAOjB,UAAU,CAACW,MAAX,IAAqB,CAACM,IAAI,GAAG5B,CAAC,CAAC4B,IAAF,CAAOjB,UAAP,CAAR,EAA4BG,CAA5B,IAAiCa,KAA7D,EAAoE;IAClEhB,UAAU,CAACkB,GAAX;IACAd,EAAE,CAACQ,IAAH,CAAQK,IAAI,CAACb,EAAb;IACAY,KAAK;EACN;;EACD,OAAOA,KAAP;AACD;;AAED,SAASR,eAAT,CAAyBW,IAAzB,EAA+B;EAC7B,OAAO,UAAUC,MAAV,EAAkBC,MAAlB,EAA0B;IAC/B,IAAID,MAAM,CAACP,UAAP,GAAoBQ,MAAM,CAACR,UAA/B,EAA2C;MACzC,OAAO,CAAC,CAAR;IACD,CAFD,MAEO,IAAIO,MAAM,CAACP,UAAP,GAAoBQ,MAAM,CAACR,UAA/B,EAA2C;MAChD,OAAO,CAAP;IACD;;IAED,OAAO,CAACM,IAAD,GAAQC,MAAM,CAACjB,CAAP,GAAWkB,MAAM,CAAClB,CAA1B,GAA8BkB,MAAM,CAAClB,CAAP,GAAWiB,MAAM,CAACjB,CAAvD;EACD,CARD;AASD"},"metadata":{},"sourceType":"module"}