{"ast":null,"code":"import '@/assets/js/china';\nexport default {\n  created() {\n    this.listUserArea();\n    this.getData();\n  },\n\n  data: function () {\n    return {\n      loading: true,\n      type: 1,\n      viewsCount: 0,\n      messageCount: 0,\n      userCount: 0,\n      articleCount: 0,\n      articleStatisticsDTOs: [],\n      tagDTOs: [],\n      viewCount: {\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross'\n          }\n        },\n        color: ['#3888fa'],\n        legend: {\n          data: ['访问量']\n        },\n        grid: {\n          left: '0%',\n          right: '0%',\n          bottom: '0%',\n          top: '10%',\n          containLabel: true\n        },\n        xAxis: {\n          data: [],\n          axisLine: {\n            lineStyle: {\n              color: '#666'\n            }\n          }\n        },\n        yAxis: {\n          axisLine: {\n            lineStyle: {\n              color: '#048CCE'\n            }\n          }\n        },\n        series: [{\n          name: '访问量',\n          type: 'line',\n          data: [],\n          smooth: true\n        }]\n      },\n      ariticleRank: {\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross'\n          }\n        },\n        color: ['#58AFFF'],\n        grid: {\n          left: '0%',\n          right: '0%',\n          bottom: '0%',\n          top: '10%',\n          containLabel: true\n        },\n        xAxis: {\n          data: []\n        },\n        yAxis: {},\n        series: [{\n          name: ['浏览量'],\n          type: 'bar',\n          data: []\n        }]\n      },\n      category: {\n        color: ['#7EC0EE', '#FF9F7F', '#FFD700', '#C9C9C9', '#E066FF', '#36dc59', '#C0FF3E'],\n        legend: {\n          data: [],\n          bottom: 'bottom'\n        },\n        tooltip: {\n          trigger: 'item'\n        },\n        series: [{\n          name: '文章分类',\n          type: 'pie',\n          roseType: 'radius',\n          data: []\n        }]\n      },\n      userAreaMap: {\n        tooltip: {\n          formatter: function (e) {\n            var value = e.value ? e.value : 0;\n            return e.seriesName + '<br />' + e.name + '：' + value;\n          }\n        },\n        visualMap: {\n          min: 0,\n          max: 1000,\n          right: 26,\n          bottom: 40,\n          showLabel: !0,\n          pieces: [{\n            gt: 100,\n            label: '100人以上',\n            color: '#ED5351'\n          }, {\n            gte: 51,\n            lte: 100,\n            label: '51-100人',\n            color: '#59D9A5'\n          }, {\n            gte: 21,\n            lte: 50,\n            label: '21-50人',\n            color: '#F6C021'\n          }, {\n            label: '1-20人',\n            gt: 0,\n            lte: 20,\n            color: '#6DCAEC'\n          }],\n          show: !0\n        },\n        geo: {\n          map: 'china',\n          zoom: 1.2,\n          layoutCenter: ['50%', '50%'],\n          itemStyle: {\n            normal: {\n              borderColor: 'rgba(0, 0, 0, 0.2)'\n            },\n            emphasis: {\n              areaColor: '#F5DEB3',\n              shadowOffsetX: 0,\n              shadowOffsetY: 0,\n              borderWidth: 0\n            }\n          }\n        },\n        series: [{\n          name: '用户人数',\n          type: 'map',\n          geoIndex: 0,\n          data: [],\n          areaColor: '#0FB8F0'\n        }]\n      }\n    };\n  },\n  methods: {\n    getData() {\n      this.axios.get('/api/admin').then(({\n        data\n      }) => {\n        this.viewsCount = data.data.viewsCount;\n        this.messageCount = data.data.messageCount;\n        this.userCount = data.data.userCount;\n        this.articleCount = data.data.articleCount;\n        this.articleStatisticsDTOs = data.data.articleStatisticsDTOs;\n\n        if (data.data.uniqueViewDTOs != null) {\n          data.data.uniqueViewDTOs.forEach(item => {\n            this.viewCount.xAxis.data.push(item.day);\n            this.viewCount.series[0].data.push(item.viewsCount);\n          });\n        }\n\n        if (data.data.categoryDTOs != null) {\n          data.data.categoryDTOs.forEach(item => {\n            this.category.series[0].data.push({\n              value: item.articleCount,\n              name: item.categoryName\n            });\n            this.category.legend.data.push(item.categoryName);\n          });\n        }\n\n        if (data.data.articleRankDTOs != null) {\n          data.data.articleRankDTOs.forEach(item => {\n            this.ariticleRank.series[0].data.push(item.viewsCount);\n            this.ariticleRank.xAxis.data.push(item.articleTitle);\n          });\n        }\n\n        if (data.data.tagDTOs != null) {\n          data.data.tagDTOs.forEach(item => {\n            this.tagDTOs.push({\n              id: item.id,\n              name: item.tagName\n            });\n          });\n        }\n\n        this.loading = false;\n      });\n    },\n\n    listUserArea() {\n      this.axios.get('/api/admin/users/area', {\n        params: {\n          type: this.type\n        }\n      }).then(({\n        data\n      }) => {\n        this.userAreaMap.series[0].data = data.data;\n      });\n    }\n\n  },\n  watch: {\n    type() {\n      this.listUserArea();\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}