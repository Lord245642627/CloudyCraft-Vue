{"ast":null,"code":"import { generaMenu } from '@/assets/js/menu';\nexport default {\n  data: function () {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: '用户名不能为空',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '密码不能为空',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    login() {\n      this.$refs.ruleForm.validate(valid => {\n        if (valid) {\n          const that = this;\n          let param = new URLSearchParams();\n          param.append('username', that.loginForm.username);\n          param.append('password', that.loginForm.password);\n          that.axios.post('/api/users/login', param).then(({\n            data\n          }) => {\n            if (data.code) {\n              that.$store.commit('login', data.data);\n              generaMenu();\n              that.$message.success('登录成功');\n              that.$router.push({\n                path: '/'\n              });\n            } else {\n              that.$message.error(data.message);\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA2BA;AACA;EACAA;IACA;MACAC;QACAC,YADA;QAEAC;MAFA,CADA;MAKAC;QACAF;UAAAG;UAAAC;UAAAC;QAAA,EADA;QAEAJ;UAAAE;UAAAC;UAAAC;QAAA;MAFA;IALA;EAUA,CAZA;EAaAC;IACAC;MACA;QACA;UACA;UACA;UACAC;UACAA;UACAC;YAAAX;UAAA;YACA;cACAW;cACAC;cACAD;cACAA;gBAAAE;cAAA;YACA,CALA,MAKA;cACAF;YACA;UACA,CATA;QAUA,CAfA,MAeA;UACA;QACA;MACA,CAnBA;IAoBA;;EAtBA;AAbA","names":["data","loginForm","username","password","rules","required","message","trigger","methods","login","param","that","generaMenu","path"],"sourceRoot":"src/views/login","sources":["Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <div class=\"login-card\">\n      <div class=\"login-title\">管理员登录</div>\n      <el-form status-icon :model=\"loginForm\" :rules=\"rules\" ref=\"ruleForm\" class=\"login-form\">\n        <el-form-item prop=\"username\">\n          <el-input\n            v-model=\"loginForm.username\"\n            prefix-icon=\"el-icon-user-solid\"\n            placeholder=\"用户名\"\n            @keyup.enter.native=\"login\" />\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input\n            v-model=\"loginForm.password\"\n            prefix-icon=\"iconfont el-icon-mymima\"\n            show-password\n            placeholder=\"密码\"\n            @keyup.enter.native=\"login\" />\n        </el-form-item>\n      </el-form>\n      <el-button type=\"primary\" @click=\"login\">登录</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { generaMenu } from '@/assets/js/menu'\nexport default {\n  data: function () {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      rules: {\n        username: [{ required: true, message: '用户名不能为空', trigger: 'blur' }],\n        password: [{ required: true, message: '密码不能为空', trigger: 'blur' }]\n      }\n    }\n  },\n  methods: {\n    login() {\n      this.$refs.ruleForm.validate((valid) => {\n        if (valid) {\n          const that = this\n          let param = new URLSearchParams()\n          param.append('username', that.loginForm.username)\n          param.append('password', that.loginForm.password)\n          that.axios.post('/api/users/login', param).then(({ data }) => {\n            if (data.code) {\n              that.$store.commit('login', data.data)\n              generaMenu()\n              that.$message.success('登录成功')\n              that.$router.push({ path: '/' })\n            } else {\n              that.$message.error(data.message)\n            }\n          })\n        } else {\n          return false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  background: url(https://static.linhaojun.top/aurora/photos/765664a8a75211296a9cd89671d6d660.png) center center / cover\n    no-repeat;\n}\n.login-card {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: #fff;\n  padding: 170px 60px 180px;\n  width: 350px;\n}\n.login-title {\n  color: #303133;\n  font-weight: bold;\n  font-size: 1rem;\n}\n.login-form {\n  margin-top: 1.2rem;\n}\n.login-card button {\n  margin-top: 1rem;\n  width: 100%;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}