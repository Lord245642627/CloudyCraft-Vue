{"ast":null,"code":"import CrontabSecond from './second.vue';\nimport CrontabMin from './min.vue';\nimport CrontabHour from './hour.vue';\nimport CrontabDay from './day.vue';\nimport CrontabMonth from './month.vue';\nimport CrontabWeek from './week.vue';\nimport CrontabYear from './year.vue';\nimport CrontabResult from './result.vue';\nexport default {\n  data() {\n    return {\n      tabTitles: ['秒', '分钟', '小时', '日', '月', '周', '年'],\n      tabActive: 0,\n      myindex: 0,\n      crontabValueObj: {\n        second: '*',\n        min: '*',\n        hour: '*',\n        day: '*',\n        month: '*',\n        week: '?',\n        year: ''\n      }\n    };\n  },\n\n  name: 'crontab',\n  props: ['expression', 'hideComponent'],\n  components: {\n    CrontabSecond,\n    CrontabMin,\n    CrontabHour,\n    CrontabDay,\n    CrontabMonth,\n    CrontabWeek,\n    CrontabYear,\n    CrontabResult\n  },\n  methods: {\n    resolveExp() {\n      if (this.expression) {\n        let arr = this.expression.split(' ');\n\n        if (arr.length >= 6) {\n          let obj = {\n            second: arr[0],\n            min: arr[1],\n            hour: arr[2],\n            day: arr[3],\n            month: arr[4],\n            week: arr[5],\n            year: arr[6] ? arr[6] : ''\n          };\n          this.crontabValueObj = { ...obj\n          };\n\n          for (let i in obj) {\n            if (obj[i]) this.changeRadio(i, obj[i]);\n          }\n        }\n      } else {\n        this.clearCron();\n      }\n    },\n\n    tabCheck(index) {\n      this.tabActive = index;\n    },\n\n    updateCrontabValue(name, value, from) {\n      'updateCrontabValue', name, value, from;\n      this.crontabValueObj[name] = value;\n\n      if (from && from !== name) {\n        this.changeRadio(name, value);\n      }\n    },\n\n    changeRadio(name, value) {\n      let arr = ['second', 'min', 'hour', 'month'],\n          refName = 'cron' + name,\n          insValue;\n      if (!this.$refs[refName]) return;\n\n      if (arr.includes(name)) {\n        if (value === '*') {\n          insValue = 1;\n        } else if (value.indexOf('-') > -1) {\n          let indexArr = value.split('-');\n          isNaN(indexArr[0]) ? this.$refs[refName].cycle01 = 0 : this.$refs[refName].cycle01 = indexArr[0];\n          this.$refs[refName].cycle02 = indexArr[1];\n          insValue = 2;\n        } else if (value.indexOf('/') > -1) {\n          let indexArr = value.split('/');\n          isNaN(indexArr[0]) ? this.$refs[refName].average01 = 0 : this.$refs[refName].average01 = indexArr[0];\n          this.$refs[refName].average02 = indexArr[1];\n          insValue = 3;\n        } else {\n          insValue = 4;\n          this.$refs[refName].checkboxList = value.split(',');\n        }\n      } else if (name == 'day') {\n        if (value === '*') {\n          insValue = 1;\n        } else if (value == '?') {\n          insValue = 2;\n        } else if (value.indexOf('-') > -1) {\n          let indexArr = value.split('-');\n          isNaN(indexArr[0]) ? this.$refs[refName].cycle01 = 0 : this.$refs[refName].cycle01 = indexArr[0];\n          this.$refs[refName].cycle02 = indexArr[1];\n          insValue = 3;\n        } else if (value.indexOf('/') > -1) {\n          let indexArr = value.split('/');\n          isNaN(indexArr[0]) ? this.$refs[refName].average01 = 0 : this.$refs[refName].average01 = indexArr[0];\n          this.$refs[refName].average02 = indexArr[1];\n          insValue = 4;\n        } else if (value.indexOf('W') > -1) {\n          let indexArr = value.split('W');\n          isNaN(indexArr[0]) ? this.$refs[refName].workday = 0 : this.$refs[refName].workday = indexArr[0];\n          insValue = 5;\n        } else if (value === 'L') {\n          insValue = 6;\n        } else {\n          this.$refs[refName].checkboxList = value.split(',');\n          insValue = 7;\n        }\n      } else if (name == 'week') {\n        if (value === '*') {\n          insValue = 1;\n        } else if (value == '?') {\n          insValue = 2;\n        } else if (value.indexOf('-') > -1) {\n          let indexArr = value.split('-');\n          isNaN(indexArr[0]) ? this.$refs[refName].cycle01 = 0 : this.$refs[refName].cycle01 = indexArr[0];\n          this.$refs[refName].cycle02 = indexArr[1];\n          insValue = 3;\n        } else if (value.indexOf('#') > -1) {\n          let indexArr = value.split('#');\n          isNaN(indexArr[0]) ? this.$refs[refName].average01 = 1 : this.$refs[refName].average01 = indexArr[0];\n          this.$refs[refName].average02 = indexArr[1];\n          insValue = 4;\n        } else if (value.indexOf('L') > -1) {\n          let indexArr = value.split('L');\n          isNaN(indexArr[0]) ? this.$refs[refName].weekday = 1 : this.$refs[refName].weekday = indexArr[0];\n          insValue = 5;\n        } else {\n          this.$refs[refName].checkboxList = value.split(',');\n          insValue = 7;\n        }\n      } else if (name == 'year') {\n        if (value == '') {\n          insValue = 1;\n        } else if (value == '*') {\n          insValue = 2;\n        } else if (value.indexOf('-') > -1) {\n          insValue = 3;\n        } else if (value.indexOf('/') > -1) {\n          insValue = 4;\n        } else {\n          this.$refs[refName].checkboxList = value.split(',');\n          insValue = 5;\n        }\n      }\n\n      this.$refs[refName].radioValue = insValue;\n    },\n\n    checkNumber(value, minLimit, maxLimit) {\n      value = Math.floor(value);\n\n      if (value < minLimit) {\n        value = minLimit;\n      } else if (value > maxLimit) {\n        value = maxLimit;\n      }\n\n      return value;\n    },\n\n    hidePopup() {\n      this.$emit('hide');\n    },\n\n    submitFill() {\n      this.$emit('fill', this.crontabValueString);\n      this.hidePopup();\n    },\n\n    clearCron() {\n      this.crontabValueObj = {\n        second: '*',\n        min: '*',\n        hour: '*',\n        day: '*',\n        month: '*',\n        week: '?',\n        year: ''\n      };\n\n      for (let j in this.crontabValueObj) {\n        this.changeRadio(j, this.crontabValueObj[j]);\n      }\n    }\n\n  },\n  computed: {\n    crontabValueString: function () {\n      let obj = this.crontabValueObj;\n      let str = obj.second + ' ' + obj.min + ' ' + obj.hour + ' ' + obj.day + ' ' + obj.month + ' ' + obj.week + (obj.year == '' ? '' : ' ' + obj.year);\n      return str;\n    }\n  },\n  watch: {\n    expression: 'resolveExp'\n  },\n  mounted: function () {\n    this.resolveExp();\n  }\n};","map":{"version":3,"mappings":"AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;IACA;MACAC,gDADA;MAEAC,YAFA;MAGAC,UAHA;MAIAC;QACAC,WADA;QAEAC,QAFA;QAGAC,SAHA;QAIAC,QAJA;QAKAC,UALA;QAMAC,SANA;QAOAC;MAPA;IAJA;EAcA,CAhBA;;EAiBAC,eAjBA;EAkBAC,sCAlBA;EAmBAC;IACAC,aADA;IAEAC,UAFA;IAGAC,WAHA;IAIAC,UAJA;IAKAC,YALA;IAMAC,WANA;IAOAC,WAPA;IAQAC;EARA,CAnBA;EA6BAC;IACAC;MACA;QACA;;QACA;UACA;YACAnB,cADA;YAEAC,WAFA;YAGAC,YAHA;YAIAC,WAJA;YAKAC,aALA;YAMAC,YANA;YAOAC;UAPA;UASA,yBACA;UADA;;UAGA;YACA;UACA;QACA;MACA,CAnBA,MAmBA;QACA;MACA;IACA,CAxBA;;IAyBAc;MACA;IACA,CA3BA;;IA4BAC;MACA;MACA;;MACA;QACA;MACA;IACA,CAlCA;;IAmCAC;MACA;MAAA,IACAC,uBADA;MAAA,IAEAC,QAFA;MAGA;;MACA;QACA;UACAA;QACA,CAFA,MAEA;UACA;UACAC;UACA;UACAD;QACA,CALA,MAKA;UACA;UACAC;UACA;UACAD;QACA,CALA,MAKA;UACAA;UACA;QACA;MACA,CAjBA,MAiBA;QACA;UACAA;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACA;UACAC;UACA;UACAD;QACA,CALA,MAKA;UACA;UACAC;UACA;UACAD;QACA,CALA,MAKA;UACA;UACAC;UACAD;QACA,CAJA,MAIA;UACAA;QACA,CAFA,MAEA;UACA;UACAA;QACA;MACA,CAzBA,MAyBA;QACA;UACAA;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACA;UACAC;UACA;UACAD;QACA,CALA,MAKA;UACA;UACAC;UACA;UACAD;QACA,CALA,MAKA;UACA;UACAC;UACAD;QACA,CAJA,MAIA;UACA;UACAA;QACA;MACA,CAvBA,MAuBA;QACA;UACAA;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACA;UACAA;QACA;MACA;;MACA;IACA,CAxHA;;IAyHAE;MACAC;;MACA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;;MACA;IACA,CAjIA;;IAkIAC;MACA;IACA,CApIA;;IAqIAC;MACA;MACA;IACA,CAxIA;;IAyIAC;MACA;QACA9B,WADA;QAEAC,QAFA;QAGAC,SAHA;QAIAC,QAJA;QAKAC,UALA;QAMAC,SANA;QAOAC;MAPA;;MASA;QACA;MACA;IACA;;EAtJA,CA7BA;EAqLAyB;IACAC;MACA;MACA,UACAC,aACA,GADA,GAEAA,OAFA,GAGA,GAHA,GAIAA,QAJA,GAKA,GALA,GAMAA,OANA,GAOA,GAPA,GAQAA,SARA,GASA,GATA,GAUAA,QAVA,IAWAA,oCAXA,CADA;MAaA;IACA;EAjBA,CArLA;EAwMAC;IACAC;EADA,CAxMA;EA2MAC;IACA;EACA;AA7MA","names":["data","tabTitles","tabActive","myindex","crontabValueObj","second","min","hour","day","month","week","year","name","props","components","CrontabSecond","CrontabMin","CrontabHour","CrontabDay","CrontabMonth","CrontabWeek","CrontabYear","CrontabResult","methods","resolveExp","tabCheck","updateCrontabValue","changeRadio","refName","insValue","isNaN","checkNumber","value","hidePopup","submitFill","clearCron","computed","crontabValueString","obj","watch","expression","mounted"],"sourceRoot":"src/components/Crontab","sources":["index.vue"],"sourcesContent":["<template>\n  <div>\n    <el-tabs type=\"border-card\">\n      <el-tab-pane label=\"秒\">\n        <CrontabSecond @update=\"updateCrontabValue\" :check=\"checkNumber\" :cron=\"crontabValueObj\" ref=\"cronsecond\" />\n      </el-tab-pane>\n      <el-tab-pane label=\"分钟\">\n        <CrontabMin @update=\"updateCrontabValue\" :check=\"checkNumber\" :cron=\"crontabValueObj\" ref=\"cronmin\" />\n      </el-tab-pane>\n      <el-tab-pane label=\"小时\">\n        <CrontabHour @update=\"updateCrontabValue\" :check=\"checkNumber\" :cron=\"crontabValueObj\" ref=\"cronhour\" />\n      </el-tab-pane>\n      <el-tab-pane label=\"日\">\n        <CrontabDay @update=\"updateCrontabValue\" :check=\"checkNumber\" :cron=\"crontabValueObj\" ref=\"cronday\" />\n      </el-tab-pane>\n      <el-tab-pane label=\"月\">\n        <CrontabMonth @update=\"updateCrontabValue\" :check=\"checkNumber\" :cron=\"crontabValueObj\" ref=\"cronmonth\" />\n      </el-tab-pane>\n      <el-tab-pane label=\"周\">\n        <CrontabWeek @update=\"updateCrontabValue\" :check=\"checkNumber\" :cron=\"crontabValueObj\" ref=\"cronweek\" />\n      </el-tab-pane>\n      <el-tab-pane label=\"年\">\n        <CrontabYear @update=\"updateCrontabValue\" :check=\"checkNumber\" :cron=\"crontabValueObj\" ref=\"cronyear\" />\n      </el-tab-pane>\n    </el-tabs>\n    <div class=\"popup-main\">\n      <div class=\"popup-result\">\n        <table>\n          <thead>\n            <th v-for=\"item of tabTitles\" width=\"40\" :key=\"item\">{{ item }}</th>\n            <th>Cron 表达式</th>\n          </thead>\n          <tbody>\n            <td>\n              <span>{{ crontabValueObj.second }}</span>\n            </td>\n            <td>\n              <span>{{ crontabValueObj.min }}</span>\n            </td>\n            <td>\n              <span>{{ crontabValueObj.hour }}</span>\n            </td>\n            <td>\n              <span>{{ crontabValueObj.day }}</span>\n            </td>\n            <td>\n              <span>{{ crontabValueObj.month }}</span>\n            </td>\n            <td>\n              <span>{{ crontabValueObj.week }}</span>\n            </td>\n            <td>\n              <span>{{ crontabValueObj.year }}</span>\n            </td>\n            <td>\n              <span>{{ crontabValueString }}</span>\n            </td>\n          </tbody>\n        </table>\n      </div>\n      <CrontabResult :ex=\"crontabValueString\"></CrontabResult>\n      <div class=\"pop_btn\">\n        <el-button size=\"small\" type=\"primary\" @click=\"submitFill\">确定</el-button>\n        <el-button size=\"small\" type=\"warning\" @click=\"clearCron\">重置</el-button>\n        <el-button size=\"small\" @click=\"hidePopup\">取消</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport CrontabSecond from './second.vue'\nimport CrontabMin from './min.vue'\nimport CrontabHour from './hour.vue'\nimport CrontabDay from './day.vue'\nimport CrontabMonth from './month.vue'\nimport CrontabWeek from './week.vue'\nimport CrontabYear from './year.vue'\nimport CrontabResult from './result.vue'\n\nexport default {\n  data() {\n    return {\n      tabTitles: ['秒', '分钟', '小时', '日', '月', '周', '年'],\n      tabActive: 0,\n      myindex: 0,\n      crontabValueObj: {\n        second: '*',\n        min: '*',\n        hour: '*',\n        day: '*',\n        month: '*',\n        week: '?',\n        year: ''\n      }\n    }\n  },\n  name: 'crontab',\n  props: ['expression', 'hideComponent'],\n  components: {\n    CrontabSecond,\n    CrontabMin,\n    CrontabHour,\n    CrontabDay,\n    CrontabMonth,\n    CrontabWeek,\n    CrontabYear,\n    CrontabResult\n  },\n  methods: {\n    resolveExp() {\n      if (this.expression) {\n        let arr = this.expression.split(' ')\n        if (arr.length >= 6) {\n          let obj = {\n            second: arr[0],\n            min: arr[1],\n            hour: arr[2],\n            day: arr[3],\n            month: arr[4],\n            week: arr[5],\n            year: arr[6] ? arr[6] : ''\n          }\n          this.crontabValueObj = {\n            ...obj\n          }\n          for (let i in obj) {\n            if (obj[i]) this.changeRadio(i, obj[i])\n          }\n        }\n      } else {\n        this.clearCron()\n      }\n    },\n    tabCheck(index) {\n      this.tabActive = index\n    },\n    updateCrontabValue(name, value, from) {\n      'updateCrontabValue', name, value, from\n      this.crontabValueObj[name] = value\n      if (from && from !== name) {\n        this.changeRadio(name, value)\n      }\n    },\n    changeRadio(name, value) {\n      let arr = ['second', 'min', 'hour', 'month'],\n        refName = 'cron' + name,\n        insValue\n      if (!this.$refs[refName]) return\n      if (arr.includes(name)) {\n        if (value === '*') {\n          insValue = 1\n        } else if (value.indexOf('-') > -1) {\n          let indexArr = value.split('-')\n          isNaN(indexArr[0]) ? (this.$refs[refName].cycle01 = 0) : (this.$refs[refName].cycle01 = indexArr[0])\n          this.$refs[refName].cycle02 = indexArr[1]\n          insValue = 2\n        } else if (value.indexOf('/') > -1) {\n          let indexArr = value.split('/')\n          isNaN(indexArr[0]) ? (this.$refs[refName].average01 = 0) : (this.$refs[refName].average01 = indexArr[0])\n          this.$refs[refName].average02 = indexArr[1]\n          insValue = 3\n        } else {\n          insValue = 4\n          this.$refs[refName].checkboxList = value.split(',')\n        }\n      } else if (name == 'day') {\n        if (value === '*') {\n          insValue = 1\n        } else if (value == '?') {\n          insValue = 2\n        } else if (value.indexOf('-') > -1) {\n          let indexArr = value.split('-')\n          isNaN(indexArr[0]) ? (this.$refs[refName].cycle01 = 0) : (this.$refs[refName].cycle01 = indexArr[0])\n          this.$refs[refName].cycle02 = indexArr[1]\n          insValue = 3\n        } else if (value.indexOf('/') > -1) {\n          let indexArr = value.split('/')\n          isNaN(indexArr[0]) ? (this.$refs[refName].average01 = 0) : (this.$refs[refName].average01 = indexArr[0])\n          this.$refs[refName].average02 = indexArr[1]\n          insValue = 4\n        } else if (value.indexOf('W') > -1) {\n          let indexArr = value.split('W')\n          isNaN(indexArr[0]) ? (this.$refs[refName].workday = 0) : (this.$refs[refName].workday = indexArr[0])\n          insValue = 5\n        } else if (value === 'L') {\n          insValue = 6\n        } else {\n          this.$refs[refName].checkboxList = value.split(',')\n          insValue = 7\n        }\n      } else if (name == 'week') {\n        if (value === '*') {\n          insValue = 1\n        } else if (value == '?') {\n          insValue = 2\n        } else if (value.indexOf('-') > -1) {\n          let indexArr = value.split('-')\n          isNaN(indexArr[0]) ? (this.$refs[refName].cycle01 = 0) : (this.$refs[refName].cycle01 = indexArr[0])\n          this.$refs[refName].cycle02 = indexArr[1]\n          insValue = 3\n        } else if (value.indexOf('#') > -1) {\n          let indexArr = value.split('#')\n          isNaN(indexArr[0]) ? (this.$refs[refName].average01 = 1) : (this.$refs[refName].average01 = indexArr[0])\n          this.$refs[refName].average02 = indexArr[1]\n          insValue = 4\n        } else if (value.indexOf('L') > -1) {\n          let indexArr = value.split('L')\n          isNaN(indexArr[0]) ? (this.$refs[refName].weekday = 1) : (this.$refs[refName].weekday = indexArr[0])\n          insValue = 5\n        } else {\n          this.$refs[refName].checkboxList = value.split(',')\n          insValue = 7\n        }\n      } else if (name == 'year') {\n        if (value == '') {\n          insValue = 1\n        } else if (value == '*') {\n          insValue = 2\n        } else if (value.indexOf('-') > -1) {\n          insValue = 3\n        } else if (value.indexOf('/') > -1) {\n          insValue = 4\n        } else {\n          this.$refs[refName].checkboxList = value.split(',')\n          insValue = 5\n        }\n      }\n      this.$refs[refName].radioValue = insValue\n    },\n    checkNumber(value, minLimit, maxLimit) {\n      value = Math.floor(value)\n      if (value < minLimit) {\n        value = minLimit\n      } else if (value > maxLimit) {\n        value = maxLimit\n      }\n      return value\n    },\n    hidePopup() {\n      this.$emit('hide')\n    },\n    submitFill() {\n      this.$emit('fill', this.crontabValueString)\n      this.hidePopup()\n    },\n    clearCron() {\n      this.crontabValueObj = {\n        second: '*',\n        min: '*',\n        hour: '*',\n        day: '*',\n        month: '*',\n        week: '?',\n        year: ''\n      }\n      for (let j in this.crontabValueObj) {\n        this.changeRadio(j, this.crontabValueObj[j])\n      }\n    }\n  },\n  computed: {\n    crontabValueString: function () {\n      let obj = this.crontabValueObj\n      let str =\n        obj.second +\n        ' ' +\n        obj.min +\n        ' ' +\n        obj.hour +\n        ' ' +\n        obj.day +\n        ' ' +\n        obj.month +\n        ' ' +\n        obj.week +\n        (obj.year == '' ? '' : ' ' + obj.year)\n      return str\n    }\n  },\n  watch: {\n    expression: 'resolveExp'\n  },\n  mounted: function () {\n    this.resolveExp()\n  }\n}\n</script>\n<style scoped>\n.pop_btn {\n  text-align: center;\n  margin-top: 20px;\n}\n.popup-main {\n  position: relative;\n  margin: 10px auto;\n  background: #fff;\n  border-radius: 5px;\n  font-size: 12px;\n  overflow: hidden;\n}\n.popup-title {\n  overflow: hidden;\n  line-height: 34px;\n  padding-top: 6px;\n  background: #f2f2f2;\n}\n.popup-result {\n  box-sizing: border-box;\n  line-height: 24px;\n  margin: 25px auto;\n  padding: 15px 10px 10px;\n  border: 1px solid #ccc;\n  position: relative;\n}\n.popup-result .title {\n  position: absolute;\n  top: -28px;\n  left: 50%;\n  width: 140px;\n  font-size: 14px;\n  margin-left: -70px;\n  text-align: center;\n  line-height: 30px;\n  background: #fff;\n}\n.popup-result table {\n  text-align: center;\n  width: 100%;\n  margin: 0 auto;\n}\n.popup-result table span {\n  display: block;\n  width: 100%;\n  font-family: arial;\n  line-height: 30px;\n  height: 30px;\n  white-space: nowrap;\n  overflow: hidden;\n  border: 1px solid #e8e8e8;\n}\n.popup-result-scroll {\n  font-size: 12px;\n  line-height: 24px;\n  height: 10em;\n  overflow-y: auto;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}