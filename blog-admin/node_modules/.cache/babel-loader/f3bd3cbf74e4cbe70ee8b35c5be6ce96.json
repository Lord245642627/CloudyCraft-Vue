{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar graphic = require(\"../../util/graphic\");\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar nodeOpacityPath = ['itemStyle', 'opacity'];\nvar hoverNodeOpacityPath = ['emphasis', 'itemStyle', 'opacity'];\nvar lineOpacityPath = ['lineStyle', 'opacity'];\nvar hoverLineOpacityPath = ['emphasis', 'lineStyle', 'opacity'];\n\nfunction getItemOpacity(item, opacityPath) {\n  return item.getVisual('opacity') || item.getModel().get(opacityPath);\n}\n\nfunction fadeOutItem(item, opacityPath, opacityRatio) {\n  var el = item.getGraphicEl();\n  var opacity = getItemOpacity(item, opacityPath);\n\n  if (opacityRatio != null) {\n    opacity == null && (opacity = 1);\n    opacity *= opacityRatio;\n  }\n\n  el.downplay && el.downplay();\n  el.traverse(function (child) {\n    if (child.type !== 'group') {\n      child.setStyle('opacity', opacity);\n    }\n  });\n}\n\nfunction fadeInItem(item, opacityPath) {\n  var opacity = getItemOpacity(item, opacityPath);\n  var el = item.getGraphicEl();\n  el.traverse(function (child) {\n    if (child.type !== 'group') {\n      child.setStyle('opacity', opacity);\n    }\n  }); // Support emphasis here.\n\n  el.highlight && el.highlight();\n}\n\nvar SankeyShape = graphic.extendShape({\n  shape: {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    cpx1: 0,\n    cpy1: 0,\n    cpx2: 0,\n    cpy2: 0,\n    extent: 0,\n    orient: ''\n  },\n  buildPath: function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n\n    ctx.closePath();\n  },\n  highlight: function () {\n    this.trigger('emphasis');\n  },\n  downplay: function () {\n    this.trigger('normal');\n  }\n});\n\nvar _default = echarts.extendChartView({\n  type: 'sankey',\n\n  /**\n   * @private\n   * @type {module:echarts/chart/sankey/SankeySeries}\n   */\n  _model: null,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _focusAdjacencyDisabled: false,\n  render: function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo; // view width\n\n    var width = layoutInfo.width; // view height\n\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.attr('position', [layoutInfo.x, layoutInfo.y]); // generate a bezire Curve for each edge\n\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyShape();\n      curve.dataIndex = edge.dataIndex;\n      curve.seriesIndex = seriesModel.seriesIndex;\n      curve.dataType = 'edge';\n      var lineStyleModel = edge.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.setStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\n\n      switch (curve.style.fill) {\n        case 'source':\n          curve.style.fill = edge.node1.getVisual('color');\n          break;\n\n        case 'target':\n          curve.style.fill = edge.node2.getVisual('color');\n          break;\n      }\n\n      graphic.setHoverStyle(curve, edge.getModel('emphasis.lineStyle').getItemStyle());\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n    }); // Generate a rect for each node\n\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var labelModel = itemModel.getModel('label');\n      var labelHoverModel = itemModel.getModel('emphasis.label');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle()\n      });\n      var hoverStyle = node.getModel('emphasis.itemStyle').getItemStyle();\n      graphic.setLabelStyle(rect.style, hoverStyle, labelModel, labelHoverModel, {\n        labelFetcher: seriesModel,\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id,\n        isRectText: true\n      });\n      rect.setStyle('fill', node.getVisual('color'));\n      graphic.setHoverStyle(rect, hoverStyle);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      rect.dataType = 'node';\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n\n      el.highlight = function () {\n        this.trigger('emphasis');\n      };\n\n      el.downplay = function () {\n        this.trigger('normal');\n      };\n\n      el.focusNodeAdjHandler && el.off('mouseover', el.focusNodeAdjHandler);\n      el.unfocusNodeAdjHandler && el.off('mouseout', el.unfocusNodeAdjHandler);\n\n      if (itemModel.get('focusNodeAdjacency')) {\n        el.on('mouseover', el.focusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._clearTimer();\n\n            api.dispatchAction({\n              type: 'focusNodeAdjacency',\n              seriesId: seriesModel.id,\n              dataIndex: el.dataIndex\n            });\n          }\n        });\n        el.on('mouseout', el.unfocusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._dispatchUnfocus(api);\n          }\n        });\n      }\n    });\n    edgeData.eachItemGraphicEl(function (el, dataIndex) {\n      var edgeModel = edgeData.getItemModel(dataIndex);\n      el.focusNodeAdjHandler && el.off('mouseover', el.focusNodeAdjHandler);\n      el.unfocusNodeAdjHandler && el.off('mouseout', el.unfocusNodeAdjHandler);\n\n      if (edgeModel.get('focusNodeAdjacency')) {\n        el.on('mouseover', el.focusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._clearTimer();\n\n            api.dispatchAction({\n              type: 'focusNodeAdjacency',\n              seriesId: seriesModel.id,\n              edgeDataIndex: el.dataIndex\n            });\n          }\n        });\n        el.on('mouseout', el.unfocusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._dispatchUnfocus(api);\n          }\n        });\n      }\n    });\n\n    if (!this._data && seriesModel.get('animation')) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n\n    this._data = seriesModel.getData();\n  },\n  dispose: function () {\n    this._clearTimer();\n  },\n  _dispatchUnfocus: function (api) {\n    var self = this;\n\n    this._clearTimer();\n\n    this._unfocusDelayTimer = setTimeout(function () {\n      self._unfocusDelayTimer = null;\n      api.dispatchAction({\n        type: 'unfocusNodeAdjacency',\n        seriesId: self._model.id\n      });\n    }, 500);\n  },\n  _clearTimer: function () {\n    if (this._unfocusDelayTimer) {\n      clearTimeout(this._unfocusDelayTimer);\n      this._unfocusDelayTimer = null;\n    }\n  },\n  focusNodeAdjacency: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var graph = data.graph;\n    var dataIndex = payload.dataIndex;\n    var itemModel = data.getItemModel(dataIndex);\n    var edgeDataIndex = payload.edgeDataIndex;\n\n    if (dataIndex == null && edgeDataIndex == null) {\n      return;\n    }\n\n    var node = graph.getNodeByIndex(dataIndex);\n    var edge = graph.getEdgeByIndex(edgeDataIndex);\n    graph.eachNode(function (node) {\n      fadeOutItem(node, nodeOpacityPath, 0.1);\n    });\n    graph.eachEdge(function (edge) {\n      fadeOutItem(edge, lineOpacityPath, 0.1);\n    });\n\n    if (node) {\n      fadeInItem(node, hoverNodeOpacityPath);\n      var focusNodeAdj = itemModel.get('focusNodeAdjacency');\n\n      if (focusNodeAdj === 'outEdges') {\n        zrUtil.each(node.outEdges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n\n          fadeInItem(edge, hoverLineOpacityPath);\n          fadeInItem(edge.node2, hoverNodeOpacityPath);\n        });\n      } else if (focusNodeAdj === 'inEdges') {\n        zrUtil.each(node.inEdges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n\n          fadeInItem(edge, hoverLineOpacityPath);\n          fadeInItem(edge.node1, hoverNodeOpacityPath);\n        });\n      } else if (focusNodeAdj === 'allEdges') {\n        zrUtil.each(node.edges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n\n          fadeInItem(edge, hoverLineOpacityPath);\n          edge.node1 !== node && fadeInItem(edge.node1, hoverNodeOpacityPath);\n          edge.node2 !== node && fadeInItem(edge.node2, hoverNodeOpacityPath);\n        });\n      }\n    }\n\n    if (edge) {\n      fadeInItem(edge, hoverLineOpacityPath);\n      fadeInItem(edge.node1, hoverNodeOpacityPath);\n      fadeInItem(edge.node2, hoverNodeOpacityPath);\n    }\n  },\n  unfocusNodeAdjacency: function (seriesModel, ecModel, api, payload) {\n    var graph = seriesModel.getGraph();\n    graph.eachNode(function (node) {\n      fadeOutItem(node, nodeOpacityPath);\n    });\n    graph.eachEdge(function (edge) {\n      fadeOutItem(edge, lineOpacityPath);\n    });\n  }\n}); // Add animation to the view\n\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nmodule.exports = _default;","map":{"version":3,"names":["graphic","require","echarts","zrUtil","nodeOpacityPath","hoverNodeOpacityPath","lineOpacityPath","hoverLineOpacityPath","getItemOpacity","item","opacityPath","getVisual","getModel","get","fadeOutItem","opacityRatio","el","getGraphicEl","opacity","downplay","traverse","child","type","setStyle","fadeInItem","highlight","SankeyShape","extendShape","shape","x1","y1","x2","y2","cpx1","cpy1","cpx2","cpy2","extent","orient","buildPath","ctx","moveTo","bezierCurveTo","lineTo","closePath","trigger","_default","extendChartView","_model","_focusAdjacencyDisabled","render","seriesModel","ecModel","api","sankeyView","graph","getGraph","group","layoutInfo","width","height","nodeData","getData","edgeData","removeAll","attr","x","y","eachEdge","edge","curve","dataIndex","seriesIndex","dataType","lineStyleModel","curvature","n1Layout","node1","getLayout","node1Model","dragX1","dragY1","n2Layout","node2","node2Model","dragX2","dragY2","edgeLayout","Math","max","dy","sy","ty","dx","setShape","getItemStyle","style","fill","setHoverStyle","add","setItemGraphicEl","eachNode","node","layout","itemModel","dragX","dragY","labelModel","labelHoverModel","rect","Rect","hoverStyle","setLabelStyle","labelFetcher","labelDataIndex","defaultText","id","isRectText","eachItemGraphicEl","getItemModel","drift","dirty","dispatchAction","seriesId","getRawIndex","localX","localY","ondragend","draggable","cursor","focusNodeAdjHandler","off","unfocusNodeAdjHandler","on","_clearTimer","_dispatchUnfocus","edgeModel","edgeDataIndex","_data","setClipPath","createGridClipShape","getBoundingRect","removeClipPath","dispose","self","_unfocusDelayTimer","setTimeout","clearTimeout","focusNodeAdjacency","payload","data","getNodeByIndex","getEdgeByIndex","focusNodeAdj","each","outEdges","inEdges","edges","unfocusNodeAdjacency","cb","rectEl","initProps","module","exports"],"sources":["/Users/lord/Documents/Programmer/vue/VueProjects/blog-vue/blog-admin/node_modules/echarts/lib/chart/sankey/SankeyView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar nodeOpacityPath = ['itemStyle', 'opacity'];\nvar hoverNodeOpacityPath = ['emphasis', 'itemStyle', 'opacity'];\nvar lineOpacityPath = ['lineStyle', 'opacity'];\nvar hoverLineOpacityPath = ['emphasis', 'lineStyle', 'opacity'];\n\nfunction getItemOpacity(item, opacityPath) {\n  return item.getVisual('opacity') || item.getModel().get(opacityPath);\n}\n\nfunction fadeOutItem(item, opacityPath, opacityRatio) {\n  var el = item.getGraphicEl();\n  var opacity = getItemOpacity(item, opacityPath);\n\n  if (opacityRatio != null) {\n    opacity == null && (opacity = 1);\n    opacity *= opacityRatio;\n  }\n\n  el.downplay && el.downplay();\n  el.traverse(function (child) {\n    if (child.type !== 'group') {\n      child.setStyle('opacity', opacity);\n    }\n  });\n}\n\nfunction fadeInItem(item, opacityPath) {\n  var opacity = getItemOpacity(item, opacityPath);\n  var el = item.getGraphicEl();\n  el.traverse(function (child) {\n    if (child.type !== 'group') {\n      child.setStyle('opacity', opacity);\n    }\n  }); // Support emphasis here.\n\n  el.highlight && el.highlight();\n}\n\nvar SankeyShape = graphic.extendShape({\n  shape: {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    cpx1: 0,\n    cpy1: 0,\n    cpx2: 0,\n    cpy2: 0,\n    extent: 0,\n    orient: ''\n  },\n  buildPath: function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n\n    ctx.closePath();\n  },\n  highlight: function () {\n    this.trigger('emphasis');\n  },\n  downplay: function () {\n    this.trigger('normal');\n  }\n});\n\nvar _default = echarts.extendChartView({\n  type: 'sankey',\n\n  /**\n   * @private\n   * @type {module:echarts/chart/sankey/SankeySeries}\n   */\n  _model: null,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _focusAdjacencyDisabled: false,\n  render: function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo; // view width\n\n    var width = layoutInfo.width; // view height\n\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.attr('position', [layoutInfo.x, layoutInfo.y]); // generate a bezire Curve for each edge\n\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyShape();\n      curve.dataIndex = edge.dataIndex;\n      curve.seriesIndex = seriesModel.seriesIndex;\n      curve.dataType = 'edge';\n      var lineStyleModel = edge.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.setStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\n\n      switch (curve.style.fill) {\n        case 'source':\n          curve.style.fill = edge.node1.getVisual('color');\n          break;\n\n        case 'target':\n          curve.style.fill = edge.node2.getVisual('color');\n          break;\n      }\n\n      graphic.setHoverStyle(curve, edge.getModel('emphasis.lineStyle').getItemStyle());\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n    }); // Generate a rect for each node\n\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var labelModel = itemModel.getModel('label');\n      var labelHoverModel = itemModel.getModel('emphasis.label');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle()\n      });\n      var hoverStyle = node.getModel('emphasis.itemStyle').getItemStyle();\n      graphic.setLabelStyle(rect.style, hoverStyle, labelModel, labelHoverModel, {\n        labelFetcher: seriesModel,\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id,\n        isRectText: true\n      });\n      rect.setStyle('fill', node.getVisual('color'));\n      graphic.setHoverStyle(rect, hoverStyle);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      rect.dataType = 'node';\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n\n      el.highlight = function () {\n        this.trigger('emphasis');\n      };\n\n      el.downplay = function () {\n        this.trigger('normal');\n      };\n\n      el.focusNodeAdjHandler && el.off('mouseover', el.focusNodeAdjHandler);\n      el.unfocusNodeAdjHandler && el.off('mouseout', el.unfocusNodeAdjHandler);\n\n      if (itemModel.get('focusNodeAdjacency')) {\n        el.on('mouseover', el.focusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._clearTimer();\n\n            api.dispatchAction({\n              type: 'focusNodeAdjacency',\n              seriesId: seriesModel.id,\n              dataIndex: el.dataIndex\n            });\n          }\n        });\n        el.on('mouseout', el.unfocusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._dispatchUnfocus(api);\n          }\n        });\n      }\n    });\n    edgeData.eachItemGraphicEl(function (el, dataIndex) {\n      var edgeModel = edgeData.getItemModel(dataIndex);\n      el.focusNodeAdjHandler && el.off('mouseover', el.focusNodeAdjHandler);\n      el.unfocusNodeAdjHandler && el.off('mouseout', el.unfocusNodeAdjHandler);\n\n      if (edgeModel.get('focusNodeAdjacency')) {\n        el.on('mouseover', el.focusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._clearTimer();\n\n            api.dispatchAction({\n              type: 'focusNodeAdjacency',\n              seriesId: seriesModel.id,\n              edgeDataIndex: el.dataIndex\n            });\n          }\n        });\n        el.on('mouseout', el.unfocusNodeAdjHandler = function () {\n          if (!sankeyView._focusAdjacencyDisabled) {\n            sankeyView._dispatchUnfocus(api);\n          }\n        });\n      }\n    });\n\n    if (!this._data && seriesModel.get('animation')) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n\n    this._data = seriesModel.getData();\n  },\n  dispose: function () {\n    this._clearTimer();\n  },\n  _dispatchUnfocus: function (api) {\n    var self = this;\n\n    this._clearTimer();\n\n    this._unfocusDelayTimer = setTimeout(function () {\n      self._unfocusDelayTimer = null;\n      api.dispatchAction({\n        type: 'unfocusNodeAdjacency',\n        seriesId: self._model.id\n      });\n    }, 500);\n  },\n  _clearTimer: function () {\n    if (this._unfocusDelayTimer) {\n      clearTimeout(this._unfocusDelayTimer);\n      this._unfocusDelayTimer = null;\n    }\n  },\n  focusNodeAdjacency: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var graph = data.graph;\n    var dataIndex = payload.dataIndex;\n    var itemModel = data.getItemModel(dataIndex);\n    var edgeDataIndex = payload.edgeDataIndex;\n\n    if (dataIndex == null && edgeDataIndex == null) {\n      return;\n    }\n\n    var node = graph.getNodeByIndex(dataIndex);\n    var edge = graph.getEdgeByIndex(edgeDataIndex);\n    graph.eachNode(function (node) {\n      fadeOutItem(node, nodeOpacityPath, 0.1);\n    });\n    graph.eachEdge(function (edge) {\n      fadeOutItem(edge, lineOpacityPath, 0.1);\n    });\n\n    if (node) {\n      fadeInItem(node, hoverNodeOpacityPath);\n      var focusNodeAdj = itemModel.get('focusNodeAdjacency');\n\n      if (focusNodeAdj === 'outEdges') {\n        zrUtil.each(node.outEdges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n\n          fadeInItem(edge, hoverLineOpacityPath);\n          fadeInItem(edge.node2, hoverNodeOpacityPath);\n        });\n      } else if (focusNodeAdj === 'inEdges') {\n        zrUtil.each(node.inEdges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n\n          fadeInItem(edge, hoverLineOpacityPath);\n          fadeInItem(edge.node1, hoverNodeOpacityPath);\n        });\n      } else if (focusNodeAdj === 'allEdges') {\n        zrUtil.each(node.edges, function (edge) {\n          if (edge.dataIndex < 0) {\n            return;\n          }\n\n          fadeInItem(edge, hoverLineOpacityPath);\n          edge.node1 !== node && fadeInItem(edge.node1, hoverNodeOpacityPath);\n          edge.node2 !== node && fadeInItem(edge.node2, hoverNodeOpacityPath);\n        });\n      }\n    }\n\n    if (edge) {\n      fadeInItem(edge, hoverLineOpacityPath);\n      fadeInItem(edge.node1, hoverNodeOpacityPath);\n      fadeInItem(edge.node2, hoverNodeOpacityPath);\n    }\n  },\n  unfocusNodeAdjacency: function (seriesModel, ecModel, api, payload) {\n    var graph = seriesModel.getGraph();\n    graph.eachNode(function (node) {\n      fadeOutItem(node, nodeOpacityPath);\n    });\n    graph.eachEdge(function (edge) {\n      fadeOutItem(edge, lineOpacityPath);\n    });\n  }\n}); // Add animation to the view\n\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}