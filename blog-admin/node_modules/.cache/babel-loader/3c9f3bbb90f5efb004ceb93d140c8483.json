{"ast":null,"code":"import * as _ from 'lodash-es';\nimport { PriorityQueue } from '../data/priority-queue.js';\nimport { Graph } from '../graph.js';\nexport { prim };\n\nfunction prim(g, weightFunc) {\n  var result = new Graph();\n  var parents = {};\n  var pq = new PriorityQueue();\n  var v;\n\n  function updateNeighbors(edge) {\n    var w = edge.v === v ? edge.w : edge.v;\n    var pri = pq.priority(w);\n\n    if (pri !== undefined) {\n      var edgeWeight = weightFunc(edge);\n\n      if (edgeWeight < pri) {\n        parents[w] = v;\n        pq.decrease(w, edgeWeight);\n      }\n    }\n  }\n\n  if (g.nodeCount() === 0) {\n    return result;\n  }\n\n  _.each(g.nodes(), function (v) {\n    pq.add(v, Number.POSITIVE_INFINITY);\n    result.setNode(v);\n  }); // Start from an arbitrary node\n\n\n  pq.decrease(g.nodes()[0], 0);\n  var init = false;\n\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n\n    if (_.has(parents, v)) {\n      result.setEdge(v, parents[v]);\n    } else if (init) {\n      throw new Error('Input graph is not connected: ' + g);\n    } else {\n      init = true;\n    }\n\n    g.nodeEdges(v).forEach(updateNeighbors);\n  }\n\n  return result;\n}","map":{"version":3,"names":["_","PriorityQueue","Graph","prim","g","weightFunc","result","parents","pq","v","updateNeighbors","edge","w","pri","priority","undefined","edgeWeight","decrease","nodeCount","each","nodes","add","Number","POSITIVE_INFINITY","setNode","init","size","removeMin","has","setEdge","Error","nodeEdges","forEach"],"sources":["/Users/lord/Documents/Programmer/vue/VueProjects/cloudycraft-vue/blog-admin/node_modules/dagre-d3-es/src/graphlib/alg/prim.js"],"sourcesContent":["import * as _ from 'lodash-es';\nimport { PriorityQueue } from '../data/priority-queue.js';\nimport { Graph } from '../graph.js';\n\nexport { prim };\n\nfunction prim(g, weightFunc) {\n  var result = new Graph();\n  var parents = {};\n  var pq = new PriorityQueue();\n  var v;\n\n  function updateNeighbors(edge) {\n    var w = edge.v === v ? edge.w : edge.v;\n    var pri = pq.priority(w);\n    if (pri !== undefined) {\n      var edgeWeight = weightFunc(edge);\n      if (edgeWeight < pri) {\n        parents[w] = v;\n        pq.decrease(w, edgeWeight);\n      }\n    }\n  }\n\n  if (g.nodeCount() === 0) {\n    return result;\n  }\n\n  _.each(g.nodes(), function (v) {\n    pq.add(v, Number.POSITIVE_INFINITY);\n    result.setNode(v);\n  });\n\n  // Start from an arbitrary node\n  pq.decrease(g.nodes()[0], 0);\n\n  var init = false;\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    if (_.has(parents, v)) {\n      result.setEdge(v, parents[v]);\n    } else if (init) {\n      throw new Error('Input graph is not connected: ' + g);\n    } else {\n      init = true;\n    }\n\n    g.nodeEdges(v).forEach(updateNeighbors);\n  }\n\n  return result;\n}\n"],"mappings":"AAAA,OAAO,KAAKA,CAAZ,MAAmB,WAAnB;AACA,SAASC,aAAT,QAA8B,2BAA9B;AACA,SAASC,KAAT,QAAsB,aAAtB;AAEA,SAASC,IAAT;;AAEA,SAASA,IAAT,CAAcC,CAAd,EAAiBC,UAAjB,EAA6B;EAC3B,IAAIC,MAAM,GAAG,IAAIJ,KAAJ,EAAb;EACA,IAAIK,OAAO,GAAG,EAAd;EACA,IAAIC,EAAE,GAAG,IAAIP,aAAJ,EAAT;EACA,IAAIQ,CAAJ;;EAEA,SAASC,eAAT,CAAyBC,IAAzB,EAA+B;IAC7B,IAAIC,CAAC,GAAGD,IAAI,CAACF,CAAL,KAAWA,CAAX,GAAeE,IAAI,CAACC,CAApB,GAAwBD,IAAI,CAACF,CAArC;IACA,IAAII,GAAG,GAAGL,EAAE,CAACM,QAAH,CAAYF,CAAZ,CAAV;;IACA,IAAIC,GAAG,KAAKE,SAAZ,EAAuB;MACrB,IAAIC,UAAU,GAAGX,UAAU,CAACM,IAAD,CAA3B;;MACA,IAAIK,UAAU,GAAGH,GAAjB,EAAsB;QACpBN,OAAO,CAACK,CAAD,CAAP,GAAaH,CAAb;QACAD,EAAE,CAACS,QAAH,CAAYL,CAAZ,EAAeI,UAAf;MACD;IACF;EACF;;EAED,IAAIZ,CAAC,CAACc,SAAF,OAAkB,CAAtB,EAAyB;IACvB,OAAOZ,MAAP;EACD;;EAEDN,CAAC,CAACmB,IAAF,CAAOf,CAAC,CAACgB,KAAF,EAAP,EAAkB,UAAUX,CAAV,EAAa;IAC7BD,EAAE,CAACa,GAAH,CAAOZ,CAAP,EAAUa,MAAM,CAACC,iBAAjB;IACAjB,MAAM,CAACkB,OAAP,CAAef,CAAf;EACD,CAHD,EAtB2B,CA2B3B;;;EACAD,EAAE,CAACS,QAAH,CAAYb,CAAC,CAACgB,KAAF,GAAU,CAAV,CAAZ,EAA0B,CAA1B;EAEA,IAAIK,IAAI,GAAG,KAAX;;EACA,OAAOjB,EAAE,CAACkB,IAAH,KAAY,CAAnB,EAAsB;IACpBjB,CAAC,GAAGD,EAAE,CAACmB,SAAH,EAAJ;;IACA,IAAI3B,CAAC,CAAC4B,GAAF,CAAMrB,OAAN,EAAeE,CAAf,CAAJ,EAAuB;MACrBH,MAAM,CAACuB,OAAP,CAAepB,CAAf,EAAkBF,OAAO,CAACE,CAAD,CAAzB;IACD,CAFD,MAEO,IAAIgB,IAAJ,EAAU;MACf,MAAM,IAAIK,KAAJ,CAAU,mCAAmC1B,CAA7C,CAAN;IACD,CAFM,MAEA;MACLqB,IAAI,GAAG,IAAP;IACD;;IAEDrB,CAAC,CAAC2B,SAAF,CAAYtB,CAAZ,EAAeuB,OAAf,CAAuBtB,eAAvB;EACD;;EAED,OAAOJ,MAAP;AACD"},"metadata":{},"sourceType":"module"}