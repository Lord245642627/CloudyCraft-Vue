{"ast":null,"code":"export default {\n  created() {\n    this.listResources();\n  },\n\n  data() {\n    return {\n      loading: true,\n      keywords: '',\n      resources: [],\n      addModule: false,\n      addResource: false,\n      resourceForm: {}\n    };\n  },\n\n  methods: {\n    listResources() {\n      this.axios.get('/api/admin/resources', {\n        params: {\n          keywords: this.keywords\n        }\n      }).then(({\n        data\n      }) => {\n        this.resources = data.data;\n        this.loading = false;\n      });\n    },\n\n    changeResource(resource) {\n      this.axios.post('/api/admin/resources', resource).then(({\n        data\n      }) => {\n        if (data.code === 0) {\n          this.$notify.success({\n            title: '成功',\n            message: data.message\n          });\n          this.listResources();\n        } else {\n          this.$notify.error({\n            title: '失败',\n            message: data.message\n          });\n        }\n      });\n    },\n\n    openModel(resource) {\n      if (resource != null) {\n        this.resourceForm = JSON.parse(JSON.stringify(resource));\n        this.$refs.moduleTitle.innerHTML = '修改模块';\n      } else {\n        this.resourceForm = {};\n        this.$refs.moduleTitle.innerHTML = '添加模块';\n      }\n\n      this.addModule = true;\n    },\n\n    openEditResourceModel(resource) {\n      if (resource.url == null) {\n        this.openModel(resource);\n        return false;\n      }\n\n      this.resourceForm = JSON.parse(JSON.stringify(resource));\n      this.$refs.resourceTitle.innerHTML = '修改资源';\n      this.addResource = true;\n    },\n\n    openAddResourceModel(resource) {\n      console.log(resource);\n      this.resourceForm = {};\n      this.resourceForm.parentId = resource.id;\n      this.$refs.resourceTitle.innerHTML = '添加资源';\n      this.addResource = true;\n    },\n\n    deleteResource(id) {\n      this.axios.delete('/api/admin/resources/' + id).then(({\n        data\n      }) => {\n        if (data.code === 0) {\n          this.$notify.success({\n            title: '成功',\n            message: data.message\n          });\n          this.listResources();\n        } else {\n          this.$notify.error({\n            title: '失败',\n            message: data.message\n          });\n        }\n      });\n    },\n\n    addOrEditResource() {\n      if (this.resourceForm.resourceName.trim() == '') {\n        this.$message.error('资源名不能为空');\n        return false;\n      }\n\n      this.axios.post('/api/admin/resources', this.resourceForm).then(({\n        data\n      }) => {\n        if (data.code === 0) {\n          this.$notify.success({\n            title: '成功',\n            message: data.message\n          });\n          this.listResources();\n        } else {\n          this.$notify.error({\n            title: '失败',\n            message: data.message\n          });\n        }\n\n        this.addModule = false;\n        this.addResource = false;\n      });\n    }\n\n  },\n  computed: {\n    tagType() {\n      return function (type) {\n        switch (type) {\n          case 'GET':\n            return '';\n\n          case 'POST':\n            return 'success';\n\n          case 'PUT':\n            return 'warning';\n\n          case 'DELETE':\n            return 'danger';\n        }\n      };\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}