{"ast":null,"code":"import Layout from '@/layout/index.vue';\nimport router from '@/router';\nimport store from '@/store';\nimport axios from 'axios';\nimport Vue from 'vue';\nexport function generaMenu() {\n  axios.get('/api/admin/user/menus').then(({\n    data\n  }) => {\n    if (data.flag) {\n      let userMenus = data.data;\n      userMenus.forEach(item => {\n        if (item.icon != null) {\n          item.icon = 'iconfont ' + item.icon;\n        }\n\n        if (item.component == 'Layout') {\n          item.component = Layout;\n        }\n\n        if (item.children && item.children.length > 0) {\n          item.children.forEach(route => {\n            route.icon = 'iconfont ' + route.icon;\n            route.component = loadView(route.component);\n          });\n        }\n      });\n      store.commit('saveUserMenus', userMenus);\n      userMenus.forEach(item => {\n        router.addRoute(item);\n      });\n    } else {\n      Vue.prototype.$message.error(data.message);\n      router.push({\n        path: '/login'\n      });\n    }\n  });\n}\nexport const loadView = view => {\n  return resolve => require([`@/views${view}`], resolve);\n};","map":{"version":3,"names":["Layout","router","store","axios","Vue","generaMenu","get","then","data","flag","userMenus","forEach","item","icon","component","children","length","route","loadView","commit","addRoute","prototype","$message","error","message","push","path","view","resolve","require"],"sources":["/Users/lord/Documents/Programmer/vue/VueProjects/blog-vue/blog-admin/src/assets/js/menu.js"],"sourcesContent":["import Layout from '@/layout/index.vue'\nimport router from '@/router'\nimport store from '@/store'\nimport axios from 'axios'\nimport Vue from 'vue'\n\nexport function generaMenu() {\n  axios.get('/api/admin/user/menus').then(({ data }) => {\n    if (data.flag) {\n      let userMenus = data.data\n      userMenus.forEach((item) => {\n        if (item.icon != null) {\n          item.icon = 'iconfont ' + item.icon\n        }\n        if (item.component == 'Layout') {\n          item.component = Layout\n        }\n        if (item.children && item.children.length > 0) {\n          item.children.forEach((route) => {\n            route.icon = 'iconfont ' + route.icon\n            route.component = loadView(route.component)\n          })\n        }\n      })\n      store.commit('saveUserMenus', userMenus)\n      userMenus.forEach((item) => {\n        router.addRoute(item)\n      })\n    } else {\n      Vue.prototype.$message.error(data.message)\n      router.push({ path: '/login' })\n    }\n  })\n}\n\nexport const loadView = (view) => {\n  return (resolve) => require([`@/views${view}`], resolve)\n}\n"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,oBAAnB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AAEA,OAAO,SAASC,UAAT,GAAsB;EAC3BF,KAAK,CAACG,GAAN,CAAU,uBAAV,EAAmCC,IAAnC,CAAwC,CAAC;IAAEC;EAAF,CAAD,KAAc;IACpD,IAAIA,IAAI,CAACC,IAAT,EAAe;MACb,IAAIC,SAAS,GAAGF,IAAI,CAACA,IAArB;MACAE,SAAS,CAACC,OAAV,CAAmBC,IAAD,IAAU;QAC1B,IAAIA,IAAI,CAACC,IAAL,IAAa,IAAjB,EAAuB;UACrBD,IAAI,CAACC,IAAL,GAAY,cAAcD,IAAI,CAACC,IAA/B;QACD;;QACD,IAAID,IAAI,CAACE,SAAL,IAAkB,QAAtB,EAAgC;UAC9BF,IAAI,CAACE,SAAL,GAAiBd,MAAjB;QACD;;QACD,IAAIY,IAAI,CAACG,QAAL,IAAiBH,IAAI,CAACG,QAAL,CAAcC,MAAd,GAAuB,CAA5C,EAA+C;UAC7CJ,IAAI,CAACG,QAAL,CAAcJ,OAAd,CAAuBM,KAAD,IAAW;YAC/BA,KAAK,CAACJ,IAAN,GAAa,cAAcI,KAAK,CAACJ,IAAjC;YACAI,KAAK,CAACH,SAAN,GAAkBI,QAAQ,CAACD,KAAK,CAACH,SAAP,CAA1B;UACD,CAHD;QAID;MACF,CAbD;MAcAZ,KAAK,CAACiB,MAAN,CAAa,eAAb,EAA8BT,SAA9B;MACAA,SAAS,CAACC,OAAV,CAAmBC,IAAD,IAAU;QAC1BX,MAAM,CAACmB,QAAP,CAAgBR,IAAhB;MACD,CAFD;IAGD,CApBD,MAoBO;MACLR,GAAG,CAACiB,SAAJ,CAAcC,QAAd,CAAuBC,KAAvB,CAA6Bf,IAAI,CAACgB,OAAlC;MACAvB,MAAM,CAACwB,IAAP,CAAY;QAAEC,IAAI,EAAE;MAAR,CAAZ;IACD;EACF,CAzBD;AA0BD;AAED,OAAO,MAAMR,QAAQ,GAAIS,IAAD,IAAU;EAChC,OAAQC,OAAD,IAAaC,OAAO,CAAC,CAAE,UAASF,IAAK,EAAhB,CAAD,EAAqBC,OAArB,CAA3B;AACD,CAFM"},"metadata":{},"sourceType":"module"}