{"ast":null,"code":"import * as imageConversion from 'image-conversion';\nexport default {\n  created() {\n    this.getAbout();\n  },\n\n  data: function () {\n    return {\n      aboutContent: ''\n    };\n  },\n  methods: {\n    getAbout() {\n      this.axios.get('/api/about').then(({\n        data\n      }) => {\n        this.aboutContent = data.data.content;\n      });\n    },\n\n    uploadImg(pos, file) {\n      var formdata = new FormData();\n\n      if (file.size / 1024 < this.config.UPLOAD_SIZE) {\n        formdata.append('file', file);\n        this.axios.post('/api/admin/articles/images', formdata).then(({\n          data\n        }) => {\n          this.$refs.md.$img2Url(pos, data.data);\n        });\n      } else {\n        imageConversion.compressAccurately(file, this.config.UPLOAD_SIZE).then(res => {\n          formdata.append('file', new window.File([res], file.name, {\n            type: file.type\n          }));\n          this.axios.post('/api/admin/articles/images', formdata).then(({\n            data\n          }) => {\n            this.$refs.md.$img2Url(pos, data.data);\n          });\n        });\n      }\n    },\n\n    updateAbout() {\n      this.axios.put('/api/admin/about', {\n        content: this.aboutContent\n      }).then(({\n        data\n      }) => {\n        if (data.code === 0) {\n          this.$notify.success({\n            title: '成功',\n            message: data.message\n          });\n        } else {\n          this.$notify.error({\n            title: '失败',\n            message: data.message\n          });\n        }\n      });\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}